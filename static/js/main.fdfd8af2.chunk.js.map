{"version":3,"sources":["components/Sketches/constants/index.js","components/common/Footer.js","components/Login/LoginInput.js","components/Login/LoginForm.js","components/Login.js","actions/userDataActions.js","components/containers/LoginContainer.js","components/Editor/constants/index.js","components/common/Radio.js","components/Editor/components/EditorRadio.js","components/common/OpenPanelButton.js","actions/uiActions.js","components/common/containers/OpenPanelButtonContainer.js","components/Editor/components/DropdownButton.js","components/Editor/containers/DropdownButtonContainer.js","components/Editor/components/Output/Processing.js","components/Editor/components/Output/Python.js","components/Editor/components/Output.js","components/Editor/containers/OutputContainer.js","lib/fetch.js","components/Editor/components/TextEditor.js","actions/programsActions.js","components/Editor/containers/TextEditorContainer.js","util/languages/CodeDownloader.js","components/Editor/index.js","actions/outputActions.js","components/Editor/containers/EditorContainer.js","components/Sketches/components/SketchBox.js","components/Sketches/components/ConfirmDeleteModal.js","components/Sketches/containers/ConfirmDeleteModalContainer.js","components/Sketches/components/DropdownButton.js","components/Sketches/components/CreateSketchModal.js","components/Sketches/containers/CreateSketchModalContainer.js","components/Sketches/components/EditSketchModal.js","components/Sketches/containers/EditSketchModalContainer.js","components/Sketches/index.js","components/Sketches/containers/SketchesContainer.js","components/common/ProfilePanel.js","components/common/containers/ProfilePanelContainer.js","components/Main.js","components/containers/MainContainer.js","components/common/LoadingPage.js","components/CreateUser/CreateUserForm.js","components/CreateUser.js","components/Error.js","components/PageNotFound.js","components/app.js","components/containers/AppContainer.js","registerServiceWorker.js","reducers/userDataReducer.js","reducers/programsReducer.js","reducers/outputReducer.js","reducers/uiReducer.js","reducers/index.js","index.js","constants/index.js","img/blueguy.png","img/tla-logo.svg","firebase/index.js"],"names":["module","exports","SketchThumbnailArray","LanguageDropdownValues","display","value","LanguageDropdownDefault","props","className","href","target","rel","src","TLALogo","alt","type","waiting","data","onChange","disabled","name","placeholder","e","LoginModal","handleEmailLogin","setState","errorMsg","preventDefault","email","state","username","EMAIL_DOMAIN_NAME","passwordHash","SHA256","password","toString","firebase","auth","signInWithEmailAndPassword","then","catch","err","console","error","newMsg","message","code","handleSocialLogin","signInWithPopup","provider","this","updateUsername","updatePassword","renderErrorMessage","msg","addBreak","renderInputs","LoginInput","renderAction","color","size","loading","Button","onSubmit","to","React","Component","Login","renderMainContent","style","backgroundImage","LoginGuy","LOAD_USER_DATA","loadUserData","uid","userData","CLEAR_USER_DATA","clearUserData","LOAD_FAILURE","loadFailure","SET_DISPLAY_NAME","SET_MOST_RECENT_PROGRAM","setMostRecentProgram","program","SET_PHOTO_NAME","LoginPage","connect","ownProps","loggedIn","dispatch","user","CODE_AND_OUTPUT","CODE_ONLY","OUTPUT_ONLY","EDITOR_WIDTH_BREAKPOINT","Radio","updateSelectedState","selected","alreadySelected","allowMultipleSelected","newState","i","indexOf","splice","concat","handleClick","renderOption","index","optionStyle","isSelected","includes","id","options","length","Object","assign","selectedOptionStyle","selectedBgColor","backgroundColor","selectedColor","bgColor","onClick","key","defaultSelected","containerStyle","map","EditorRadio","isSmall","push","viewMode","height","updateViewMode","OpenPanelButton","panelOpen","togglePanel","title","icon","faBars","SCREEN_RESIZE","TOGGLE_PANEL","SET_PANEL","OpenPanelButtonContainer","ui","DropdownButton","toggleHandler","prevVal","dropdownOpen","selectLanguage","result","dirty","window","confirm","onSelect","renderDropdownItems","dropdownItems","faLanguage","language","faPython","faCogs","faHtml5","DropdownItem","fixedWidth","marginLeft","defaultOpen","currentLanguage","Dropdown","isOpen","toggle","DropdownToggle","caret","displayValue","DropdownMenu","DropdownButtonContainer","mostRecentProgram","mostRecentLanguage","programs","getIn","listOfPrograms","keySeq","showConsole","getUserScript","getProcessingSrcDocBody","getPythonSrcDocSkulptScript","getPythonSrcDocBody","Output","shouldComponentUpdate","nextProps","nextState","firstLoad","run","counter","reRenderOutput","prevState","renderIframe","getSrcDoc","call","screenHeight","srcDoc","onLoad","log","renderOutput","runResult","srcDocFunc","PROCESSING","CreateProcessingDoc","PYTHON","btoa","CreatePythonDoc","JAVA","JAVASCRIPT","CPP","HTML","renderOpenPanelButton","renderLanguageDropdown","renderRadio","toggleConsole","renderConsoleButton","faTerminal","renderBanner","flex","runCode","faPlay","OutputContainer","clearOutput","getUserData","a","includePrograms","getUserDataEndpoint","constants","SERVER_URL","method","mode","fetch","json","ok","makeServerRequest","endpoint","body","keys","JSON","stringify","headers","updatePrograms","updateUserData","createSketch","deleteSketch","CodeMirror","navigator","require","Controlled","TextEditor","componentWillUnmount","removeEventListener","onLeave","checkDirty","programToUpdate","ev","returnValue","setCodeMirrorInstance","codeMirrorInstance","updateCode","editor","newCode","dirtyCode","setProgramCode","setCurrentLine","cm","currentLine","line","getCursor","removeLineClass","addLineClass","addEventListener","CODEMIRROR_CONVERSIONS","theme","lineNumbers","lineWrapping","indentWithTabs","editorDidMount","refresh","onCursor","onBeforeChange","SET_PROGRAM_CODE","SET_PROGRAM_LANGUAGE","SET_PROGRAM_NAME","SET_PROGRAM_THUMBNAIL","DELETE_PROGRAM","LOAD_PROGRAMS","CLEAR_PROGRAMS","SET_PROGRAM_DIRTY","setProgramDirty","ADD_PROGRAM","TextEditorContainer","get","Immutable","Map","toJS","CodeDownloader","download","extension","file","element","document","createElement","Blob","ProcessingConstructor","URL","createObjectURL","appendChild","click","Editor","resetSaveText","saveText","handleSave","event","setTimeout","cleanCode","handleDownload","renderDropdown","renderCodeAndOutput","resizerStyle","borderLeft","borderRight","width","pane1Style","onDragStarted","onDragFinished","transition","split","minSize","screenWidth","PANEL_SIZE","maxSize","allowResize","renderCode","marginRight","faSave","faDownload","minHeight","maxHeight","renderContent","codeStyle","left","redirect","prevProps","CLEAR_OUTPUT","SET_RUN_RESULT","SET_OUTPUT_LANGUAGE","SET_OUTPUT","EditorContainer","undefined","forEach","OPEN_PANEL_LEFT","CLOSED_PANEL_LEFT","output","setOutput","SketchBox","redirFunc","pathname","process","img","Row","Col","editFunc","faEdit","downloadFunc","deleteFunc","faTrashAlt","ConfirmDeleteModal","closeModal","onClose","onDeleteSubmit","docID","sketchKey","res","deleteProgram","spinner","onRequestClose","ariaHideApp","Container","sketchName","block","ConfirmDeleteModalContainer","CreateSketchModal","next","thumbnail","disableSubmit","setNext","val","onBack","badThumbnailInput","badNameInput","badLanguageInput","notFound","onFirstSubmit","onSecondSubmit","addProgram","programData","renderSecondModal","icons","thumbnailPreview","overlayClassName","renderFirstModal","FormGroup","row","Label","for","xs","Input","lang","CreateSketchModalContainer","EditSketchModal","newLanguage","newName","newThumbnail","onThumbnails","handleSubmitEdit","doUpdate","updateData","setProgramLanguage","setProgramName","setProgramThumbnail","sketchImg","sketchLang","textAlign","renderThumbnailModal","renderMainModal","EditSketchModalContainer","ROW_PADDING","SKETCH_WIDTH","Sketches","getRandomSketchThumbnail","Math","floor","random","downloadSketchCode","setCreateSketchModalOpen","createSketchModalOpen","setConfirmDeleteModalOpen","sketch","confirmDeleteModalOpen","selectedSketch","selectedKey","setEditSketchModalOpen","editSketchModalOpen","selectedImg","selectedLang","setProgram","renderHeader","faFile","getThumbnailSrc","renderSketches","newList","sketches","sort","b","languageDisplay","numSketchesPerRow","calculatedWidth","rows","originalLength","renderConfirmDeleteModal","renderCreateSketchModal","renderEditSketchModal","Fragment","SketchesContainer","temp","ProfilePanel","handleOpenModal","showModal","selectedImage","photoName","handleCloseModal","handleEditNameClick","editingName","handleEditImageClick","onNameChange","checkInputs","MINIMUM_DISPLAY_NAME_LENGTH","MAXIMUM_DISPLAY_NAME_LENGTH","displayNameMessage","match","onNameSubmit","displayName","setDisplayName","onImageSubmit","setPhotoName","renderPanelImage","onMouseEnter","imageIsHovering","onMouseLeave","PHOTO_NAMES","DEFAULT_PHOTO_NAME","onImageClick","renderImageModal","renderName","onBlur","nameIsHovering","renderEditorButton","faPencilAlt","renderSketchesButton","faBook","renderSignOutButton","signOut","faSignOutAlt","renderButtons","panelButtons","contentType","renderCollapseButton","faTimes","panelStyle","ProfilePanelContainer","collectUserPhoto","renderSketchesPage","renderEditor","MainContainer","panelLeft","Main","Loading","CreateUserForm","confirmPassword","badInputs","MINIMUM_USERNAME_LENGTH","MAXIMUM_USERNAME_LENGTH","usernameMessage","MINIMUM_PASSWORD_LENGTH","MAXIMUM_PASSWORD_LENGTH","passwordMessage","submit","errorMessage","passHash","createUserWithEmailAndPassword","updateConfirmPassword","renderLink","CreateUser","Error","GH_REPO_NAME","isValidUser","EmailAuthProvider","App","componentDidMount","onAuthStateChanged","onAuthHandler","handleResize","screenResize","innerWidth","innerHeight","showErrorPage","checkedAuth","renderHome","LoadingPage","basename","ROUTER_BASE_NAME","exact","path","render","PageNotFound","Root","onFailure","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","initialState","userDataReducer","action","response","newPhotoName","programsReducer","fromJS","setIn","set","delete","outputReducer","uiReducer","appReducers","combineReducers","initializeApp","config","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","getElementById","origin","status","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","PUBLIC_URL","lightbulb","orange","pear","apple","hotdog","icecream","cloud","earth","heart","DEFAULT_MODE","DEFAULT_LANG","RING_LOADER_SIZE","FacebookAuthProvider","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId"],"mappings":"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","file":"static/js/main.fdfd8af2.chunk.js","sourcesContent":["const SketchThumbnailArray = [\n  \"Ant\",\n  \"Badger\",\n  \"Bear\",\n  \"Beaver\",\n  \"Bird\",\n  \"Bug\",\n  \"Bull\",\n  \"Bumblebee\",\n  \"Butterfly\",\n  \"Cat\",\n  \"Caterpillar\",\n  \"Chicken\",\n  \"Clown Fish\",\n  \"Corgi\",\n  \"Cow\",\n  \"Crab\",\n  \"Deer\",\n  \"Dinosaur\",\n  \"Dog\",\n  \"Dolphin\",\n  \"Dragonfly\",\n  \"Duck\",\n  \"Elephant\",\n  \"Falcon\",\n  \"Fish\",\n  \"Fly\",\n  \"Frog\",\n  \"Giraffe\",\n  \"Gorilla\",\n  \"Grasshopper\",\n  \"Horse\",\n  \"Hummingbird\",\n  \"Insect\",\n  \"Kangaroo\",\n  \"Kiwi Bird\",\n  \"Ladybird\",\n  \"Leopard\",\n  \"Lion\",\n  \"Llama\",\n  \"Mite\",\n  \"Mosquito\",\n  \"Octopus\",\n  \"Panda\",\n  \"Prawn\",\n  \"Puffin Bird\",\n  \"Rabbit\",\n  \"Rhinoceros\",\n  \"Seahorse\",\n  \"Shark\",\n  \"Sheep\",\n  \"Snail\",\n  \"Spider\",\n  \"Starfish\",\n  \"Stork\",\n  \"Turtle\",\n  \"Unicorn\",\n  \"Whale\",\n  \"Wolf\",\n];\n\nconst LanguageDropdownValues = [\n  { display: \"Python\", value: \"python\" },\n  { display: \"Processing\", value: \"processing\" },\n  { display: \"HTML\", value: \"html\" },\n];\n\nconst LanguageDropdownDefault = { display: \"Python\", value: \"python\" };\n\nmodule.exports = {\n  SketchThumbnailArray,\n  LanguageDropdownValues,\n  LanguageDropdownDefault,\n};\n","import React from \"react\";\nimport TLALogo from \"../../img/tla-logo.svg\";\nimport \"styles/Footer.scss\";\n\nexport default props => (\n  <footer className=\"footer\">\n    <a href=\"https://github.com/uclaacm/TeachLAFrontend\" target=\"_blank\" rel=\"noopener noreferrer\">\n      <img\n        className=\"footer-image\"\n        src={TLALogo}\n        alt=\"Teach LA logo and link to GitHub Repository\"\n      />\n    </a>\n  </footer>\n);\n","import React from \"react\";\nimport \"styles/Login.scss\";\n\n/**-------Props-------\n * type: string, if password, hides the input with dots; also used as the header for the input\n * waiting: boolean that disables the input if true\n * data: value inside the input\n * onChange: function to be called when input changes\n */\n\nexport default ({ type, waiting, data, onChange }) => (\n  <div>\n    <div className=\"login-form-input-header\">{type}</div>\n    <input\n      className=\"login-form-input\"\n      type={type === \"Password\" || type === \"Confirm Password\" ? \"password\" : \"text\"}\n      disabled={waiting}\n      name={type}\n      placeholder=\"\"\n      value={data}\n      onChange={e => onChange(e.target.value)}\n    />\n    <br />\n  </div>\n);\n","import React from \"react\";\nimport SHA256 from \"crypto-js/sha256\";\nimport { Button } from \"reactstrap\";\nimport { RingLoader } from \"react-spinners\";\nimport { EMAIL_DOMAIN_NAME } from \"../../constants\";\nimport { Link } from \"react-router-dom\";\nimport LoginInput from \"./LoginInput\";\nimport firebase from \"firebase\";\nimport \"styles/Login.scss\";\n\n/**-------Props--------\n * provider: Firebase Provider that allows the app to do Facebook Logins\n */\n\nexport default class LoginModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      errorMsg: \"\",\n      waiting: false,\n    };\n  }\n\n  //===========React Lifecycle Functions============//\n  componentDidMount() {}\n\n  handleEmailLogin = e => {\n    this.setState({ waiting: true, errorMsg: \"\" });\n\n    e.preventDefault(); //prevents page from reloading after submitting form\n    let email = this.state.username + EMAIL_DOMAIN_NAME;\n    let passwordHash = SHA256(this.state.password).toString();\n\n    if (email && passwordHash) {\n      firebase\n        .auth()\n        .signInWithEmailAndPassword(email, passwordHash)\n        .then(() => {})\n        .catch(err => {\n          console.error(err);\n          let newMsg = err.message;\n          switch (err.code) {\n            case \"auth/invalid-email\":\n              newMsg =\n                \"Invalid username. Usernames must only have alphanumeric characters plus !@#$%.\";\n              break;\n            case \"auth/user-not-found\":\n              newMsg = \"No account found for username.\";\n              break;\n            case \"auth/wrong-password\":\n              newMsg = \"Invalid password provided.\";\n              break;\n            case \"auth/network-request-failed\":\n              newMsg = \"Network error - check your internet connection.\";\n              break;\n            case \"auth/app-deleted\":\n            case \"auth/app-not-authorized\":\n            case \"auth/argument-error\":\n            case \"auth/invalid-api-key\":\n            case \"auth/operation-not-allowed\":\n            case \"auth/requires-recent-login\":\n            case \"auth/unauthorized-domain\":\n              newMsg =\n                \"App was not properly configured. Please contact administrator. Error: \" + err.code;\n              break;\n            case \"auth/invalid-user-token\":\n            case \"auth/user-disabled\":\n            case \"auth/user-token-expired\":\n            case \"auth/web-storage-unsupported\":\n              newMsg = \"Issue with user. Please contact administrator. Error: \" + err.code;\n              break;\n            default:\n              newMsg = \"Failed to sign in: \" + err.code;\n          }\n          this.setState({ errorMsg: newMsg, waiting: false });\n        });\n    } else {\n      this.setState({ waiting: false, errorMsg: \"Failed to reach Firebase login services\" });\n    }\n  };\n\n  handleSocialLogin = e => {\n    this.setState({ waiting: true });\n    firebase\n      .auth()\n      .signInWithPopup(this.props.provider)\n      .catch(function(err) {\n        this.setState({ errorMsg: \"Failed to use Facebook login provider\", waiting: false });\n      });\n  };\n\n  updateUsername = username => this.setState({ username });\n  updatePassword = password => this.setState({ password });\n\n  renderErrorMessage = (msg, addBreak) => {\n    if (msg)\n      return (\n        <span>\n          <div className=\"login-form-input-error\">{msg}</div>\n          {addBreak ? <br /> : null}\n        </span>\n      );\n\n    return <br />;\n  };\n\n  renderInputs = () => (\n    <div className=\"login-form-input-list\">\n      <div>\n        <LoginInput\n          type={\"Username\"}\n          data={this.state.username}\n          waiting={this.state.waiting}\n          onChange={this.updateUsername}\n        />\n        <LoginInput\n          type={\"Password\"}\n          data={this.state.password}\n          waiting={this.state.waiting}\n          onChange={this.updatePassword}\n        />\n      </div>\n      {this.renderErrorMessage(this.state.errorMsg)}\n    </div>\n  );\n\n  renderAction = () => {\n    if (this.state.waiting) {\n      return (\n        <div className=\"login-form-loader\">\n          <RingLoader color={\"#857e8f\"} size={50} loading={true} />\n        </div>\n      );\n    } else {\n      /* We've disabled the social button for now, but here it is.\n        <SocialButton\n          imgSrc=\"/img/fbLogo1.png\"\n          bgColor=\"#4267b2\"\n          textColor=\"white\"\n          value=\"Login with Facebook\"\n          handleLogin={this.handleSocialLogin}\n        />\n      */\n      return (\n        <Button className=\"login-form-button\" size=\"lg\" type=\"submit\">\n          Login\n        </Button>\n      );\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"login-form-container\">\n        <form className=\"login-form\" onSubmit={this.handleEmailLogin}>\n          <h1>\n            Welcome to <span className=\"force-no-wrap\">&lt;Teach LA&gt;</span>\n          </h1>\n          <br />\n          {this.renderInputs()}\n          {this.renderAction()}\n          <br />\n          <br />\n          <Link to=\"/createUser\" className=\"login-form-link\">\n            Don't have an account? Create one now!\n          </Link>\n          <br />\n          <br />\n          <details>\n            <summary>Forgot your password?</summary>\n            <p>\n              Send us an email at <a href=\"mailto:acmteachla@gmail.com\">acmteachla@gmail.com</a>{\" \"}\n              with \"Forgot Password\" in the subject, and we'll do our best to help you out!\n            </p>\n          </details>\n        </form>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Footer from \"./common/Footer\";\nimport \"styles/Login.scss\";\nimport LoginForm from \"./Login/LoginForm\";\nimport LoginGuy from \"img/blueguy.png\";\n\n/**--------Props--------\n * provider: Facebook Provider used to login with Facebook\n */\n\nclass Login extends React.Component {\n  /**\n   * constructor - sets initial state\n   */\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  renderMainContent = () => {\n    return (\n      <div className=\"login-page-content\" style={{ backgroundImage: `url(${LoginGuy})` }}>\n        <LoginForm provider={this.props.provider} />\n      </div>\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"login-page\">\n        {this.renderMainContent()}\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","export const LOAD_USER_DATA = \"LOAD_USER_DATA\";\nexport function loadUserData(uid, userData) {\n  // add uid to the userData object\n  return { type: LOAD_USER_DATA, userData: { ...userData, uid: uid } };\n}\n\nexport const CLEAR_USER_DATA = \"CLEAR_USER_DATA\";\nexport function clearUserData() {\n  return { type: CLEAR_USER_DATA };\n}\n\nexport const LOAD_FAILURE = \"LOAD_FAILURE\";\nexport function loadFailure(err) {\n  return { type: LOAD_FAILURE, waiting: false, message: err };\n}\n\nexport const SET_DISPLAY_NAME = \"SET_DISPLAY_NAME\";\nexport function setDisplayName(displayName) {\n  return { type: SET_DISPLAY_NAME, value: displayName };\n}\n\nexport const REQUEST_DATA_UPLOAD = \"REQUEST_DATA_UPLOAD\";\nexport function requestDataUpload(packet) {\n  return { type: REQUEST_DATA_UPLOAD, packet: packet };\n}\n\nexport const REQUEST_PROGRAM_LOAD = \"REQUEST_PROGRAM_LOAD\";\nexport function requestProgramLoad(collection) {\n  return { type: REQUEST_PROGRAM_LOAD, programs: collection };\n}\n\nexport const PROGRAM_LOAD_FAILURE = \"PROGRAM_LOAD_FAILURE\";\nexport function programLoadFailure(error) {\n  return { type: PROGRAM_LOAD_FAILURE, error: error };\n}\n\nexport const PROGRAM_UPLOAD_SUCCESS = \"PROGRAM_UPLOAD_SUCCESS\";\nexport function programUploadSuccess() {\n  return { type: PROGRAM_UPLOAD_SUCCESS };\n}\n\nexport const PROGRAM_LOAD_SUCCESS = \"PROGRAM_LOAD_SUCCESS\";\nexport function programLoadSuccess() {\n  return { type: PROGRAM_LOAD_SUCCESS };\n}\n\nexport const PROGRAM_UPLOAD_FAILURE = \"PROGRAM_UPLOAD_FAILURE\";\nexport function programUploadFailure(error) {\n  return { type: PROGRAM_UPLOAD_FAILURE, message: error.message };\n}\n\nexport const SET_MOST_RECENT_PROGRAM = \"SET_MOST_RECENT_PROGRAM\";\nexport function setMostRecentProgram(program) {\n  return { type: SET_MOST_RECENT_PROGRAM, value: program };\n}\n\nexport const SET_PHOTO_NAME = \"SET_PHOTO_NAME\";\nexport function setPhotoName(photoName) {\n  return { type: SET_PHOTO_NAME, photoName: photoName };\n}\n\n// /**\n//  * dataUpload - attempts to upload program of data into firestore to persist it.\n//  * @param  {[type]} program - the program to upload\n//  * @param  {[type]} id     [description]\n//  * @return {[type]}        [description]\n//  */\n// export function programUpload(program, id){\n//   return (dispatch, getState) => {\n//     let program = getState().textEditor.editors.get(id).program\n//     let doc = progToDoc(program, getState().userData.programs)\n//     // if there is already a firestore document corresponding to this program, update it\n//     // otherwise, we need to create a new document remotely in firestore to store this data\n//     doc.get().then(function(docSnapshot){\n//       if(docSnapshot && docSnapshot.exists){\n//         dispatch(requestDataUpload(program))\n//         // merge: true makes it so that the document update is merged with any existing document data,\n//         // but the document the new data is merged into does not have to exist\n//         doc.set(Object.assign({}, program), {merge: true}).then(function(){\n//           dispatch(programUploadSuccess())\n//         }).catch(function(error){\n//           console.error(error.message)\n//           dispatch(programUploadFailure(error))\n//         })\n//       }\n//     })\n//   }\n// }\n\n// export function getMostRecentProgram(){\n//   return (dispatch, getState) => {\n//     let programs = getState().userData.programs\n//     //if for some reason we get no programs back, send back an invalid documnet\n//     if(!programs){\n//       return new Promise((resolve, reject) =>{\n//         resolve(new Program())\n//       })\n//     }\n//     return new Promise(async (resolve, reject) => {\n\n//       programs.orderBy(MODIFICATION_DATE, DESCENDING).limit(1).get().then((queryResult) => {\n//         if(queryResult && queryResult.docs[0]){\n//           let doc = queryResult.docs[0]\n//           resolve(new Program(doc))\n//         } else {\n//           resolve(new Program())\n//         }\n//       }).catch(function(err){\n//         reject(err)\n//       })\n//     })\n//   }\n// }\n","import Login from '../Login.js'\nimport {connect} from 'react-redux'\nimport {loadUserData, clearUserData, loadFailure} from '../../actions/userDataActions.js'\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    loggedIn: state.userData,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loadUserData: user => {\n      dispatch(loadUserData(user));\n    },\n    clearUserData: () => {\n      dispatch(clearUserData());\n    },\n    loadFailure: err => {\n      dispatch(loadFailure(err));\n    },\n  }\n}\n\nconst LoginPage = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Login);\n\nexport default LoginPage;\n","//View Mode\nexport const CODE_AND_OUTPUT = 0;\nexport const CODE_ONLY = 1;\nexport const OUTPUT_ONLY = 2;\n\n//UI\nexport const EDITOR_WIDTH_BREAKPOINT = 1000;\n","import React from \"react\";\nimport \"styles/Radio.scss\";\n/**\n * Props\n *\n * options: (array of jsons) content for each box\n *          each json should look like {\n *            display: \"Text to be displayed\",\n *            (optional) value: the hidden value correlating to the display value (defaults to the index)\n *          }\n * defaultSelected: (same type as options' value key) the option that will be default selected\n *                   CAREFUL: if handleClick causes Radio to be re-rendered, make sure you're fine\n *                   with this variable always being the defaultSelected\n * containerStyle: (json) overrides the style on the outer container\n * optionStyle: (json) overrides the style on each individual option\n * selectedOptionStyle: (json) overrides the style on the selected option\n * bgColor: (string) color of the non selected options\n * color: (string) color of the non selected options text\n * selectedBgColor: (string) color of the selected option\n * selectedColor: (string) color of the selected options text\n * handleClick: (func) function to be called when an option is clicked\n *              should have 1 parameter (value) which is the value (from the options prop) that is selected (defaults to index)\n * allowMultipleSelected: (bool) if true, allows multiple options to be selected\n *                        changes handle click to be called with all selected values\n */\n\nexport default class Radio extends React.Component {\n  constructor(props) {\n    super(props);\n\n    let selected = this.props.defaultSelected;\n    if (this.props.allowMultipleSelected) {\n      selected = selected || [];\n    }\n\n    this.state = {\n      selected,\n    };\n  }\n\n  updateSelectedState = (selected, alreadySelected) => {\n    if (this.props.allowMultipleSelected) {\n      let newState = this.state.selected;\n      if (alreadySelected) {\n        let i = this.state.selected.indexOf(selected);\n        if (i >= 0) newState.splice(i, 1);\n      } else {\n        newState = this.state.selected.concat([selected]);\n      }\n      if (this.props.handleClick) {\n        this.props.handleClick(newState);\n      }\n      this.setState({ selected: newState });\n    } else {\n      if (this.props.handleClick) {\n        this.props.handleClick(selected);\n      }\n      this.setState({ selected });\n    }\n  };\n\n  renderOption = ({ display, value }, index) => {\n    //if no value is provided, use the index\n    value = value || index;\n\n    let isSelected =\n      value === this.state.selected ||\n      (this.props.allowMultipleSelected && this.state.selected.includes(value));\n    //attach -selected if the value matches the selected state\n    const className = \"radio-option\" + (isSelected ? \"-selected\" : \"\");\n    //add an id of radio-left if its the first option or radio-right if its the last option\n    const id =\n      index === 0 ? \"radio-left\" : index === this.props.options.length - 1 ? \"radio-right\" : \"\";\n\n    let optionStyle;\n    if (isSelected) {\n      optionStyle = Object.assign(\n        {},\n        this.props.optionStyle || {},\n        this.props.selectedOptionStyle || {},\n        this.props.selectedBgColor ? { backgroundColor: this.props.selectedBgColor } : {},\n        this.props.selectedColor ? { color: this.props.selectedColor } : {},\n      );\n    } else {\n      optionStyle = Object.assign(\n        {},\n        this.props.optionStyle || {},\n        this.props.bgColor ? { backgroundColor: this.props.bgColor } : {},\n        this.props.color ? { color: this.props.color } : {},\n      );\n    }\n\n    return (\n      <div\n        className={className}\n        onClick={() => this.updateSelectedState(value, isSelected)}\n        style={optionStyle}\n        id={id}\n        key={index}\n      >\n        {display}\n      </div>\n    );\n  };\n\n  render() {\n    const containerStyle = this.props.containerStyle;\n\n    let options = this.props.options || [];\n\n    return (\n      <div className=\"radio-selector\" style={containerStyle}>\n        {options.map(this.renderOption)}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { CODE_AND_OUTPUT, CODE_ONLY, OUTPUT_ONLY } from \"../constants\";\nimport Radio from \"../../common/Radio.js\";\n\n/**-------Props--------\n * runCode: function to be called when button is pressed\n */\nconst EditorRadio = props => {\n  let options = [];\n  if (!props.isSmall) options.push({ display: \"Both\", value: CODE_AND_OUTPUT });\n  options = options.concat([\n    { display: \"Code\", value: CODE_ONLY },\n    { display: \"Output\", value: OUTPUT_ONLY },\n  ]);\n\n  return (\n    <Radio\n      options={options}\n      defaultSelected={props.viewMode}\n      containerStyle={{ height: \"40px\" }}\n      handleClick={props.updateViewMode}\n    />\n  );\n};\n\nexport default EditorRadio;\n","import React from \"react\";\nimport { faBars } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\n/**-------Props--------\n * panelOpen: boolean, is profile panel visible\n * togglePanel: function to call when you want the Profile Panel to disappear/reappear\n */\n\nconst OpenPanelButton = ({ panelOpen, togglePanel }) => {\n  //if the left panel is closed, show nothing\n  //otherwise show hamburger icon\n  if (panelOpen) {\n    return <div className=\"editor-expand-panel-arrow-hidden\" />;\n  } else {\n    return (\n      <div className=\"editor-expand-panel-arrow\" title=\"Open Profile Panel\" onClick={togglePanel}>\n        <FontAwesomeIcon icon={faBars} />\n      </div>\n    );\n  }\n};\n\nexport default OpenPanelButton;\n","export const SCREEN_RESIZE = \"SCREEN_RESIZE\";\nexport function screenResize(width, height) {\n  return { type: SCREEN_RESIZE, width, height };\n}\n\nexport const TOGGLE_PANEL = \"TOGGLE_PANEL\";\nexport function togglePanel() {\n  return { type: TOGGLE_PANEL };\n}\n\nexport const SET_PANEL = \"SET_PANEL\";\nexport function setPanel(value) {\n  return { type: SET_PANEL, value };\n}\n","import OpenPanelButton from \"../OpenPanelButton.js\";\nimport { connect } from \"react-redux\";\nimport { togglePanel } from \"../../../actions/uiActions.js\";\n\nconst mapStateToProps = state => {\n  return {\n    panelOpen: state.ui.panelOpen,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    togglePanel: () => dispatch(togglePanel()),\n  };\n};\n\nconst OpenPanelButtonContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(OpenPanelButton);\n\nexport default OpenPanelButtonContainer;\n","import React from \"react\";\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from \"reactstrap\";\nimport { faCogs } from \"@fortawesome/free-solid-svg-icons\";\nimport { faPython } from \"@fortawesome/free-brands-svg-icons\";\nimport { faHtml5 } from \"@fortawesome/free-brands-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\n/**--------Props---------------\n * dropdownItems: array of strings, each string being the name of a Program\n * displayValue: string to be displayed as the placeholder for the dropdown\n * onSelect: function called when an item is selected in the dropdown\n */\n/**--------Optional props--------\n * defaultOpen: boolean determining if the dropdown should start off open or closed\n */\nexport default class DropdownButton extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dropdownOpen: this.props.defaultOpen || false,\n    };\n  }\n\n  //==============React Lifecycle Functions===================//\n  componentDidMount() {}\n\n  toggleHandler = prevVal => {\n    this.setState({ dropdownOpen: !prevVal });\n  };\n\n  selectLanguage = program => {\n    let result = true;\n    if (this.props.dirty) {\n      result = window.confirm(\"Are you sure you want to change programs? You have unsaved changes\");\n    }\n\n    if (this.props.onSelect && result) {\n      this.props.onSelect(program);\n    }\n  };\n\n  renderDropdownItems = () => {\n    //map each program string in the array to a dropdown item\n    return this.props.dropdownItems.map(program => {\n      let faLanguage;\n      switch (program.language) {\n        case \"python\":\n          faLanguage = faPython;\n          break;\n        case \"processing\":\n          faLanguage = faCogs;\n          break;\n        case \"html\":\n        default:\n          faLanguage = faHtml5;\n      }\n      return (\n        <DropdownItem key={program.key} onClick={() => this.selectLanguage(program.key)}>\n          <FontAwesomeIcon icon={faLanguage} fixedWidth />\n          <span style={{ marginLeft: \"10px\" }}>{program.name}</span>\n        </DropdownItem>\n      );\n    });\n  };\n\n  render() {\n    // let value = this.props.displayValue\n    // if(this.props.dirty){\n    //   value = (<span>&#8226;{this.props.displayValue}</span>)\n    // }\n\n    let faLanguage;\n    switch (this.props.currentLanguage) {\n      case \"python\":\n        faLanguage = faPython;\n        break;\n      case \"processing\":\n        faLanguage = faCogs;\n        break;\n      case \"html\":\n      default:\n        faLanguage = faHtml5;\n    }\n\n    return (\n      <div className=\"editor-language-dropdown\">\n        <Dropdown\n          isOpen={this.state.dropdownOpen}\n          toggle={() => this.toggleHandler(this.state.dropdownOpen)}\n        >\n          {/* HACK: disables the colors entirely, makes the dropdown transparent */}\n          <DropdownToggle className=\"btn-language-dropdown\" color={\"\"} caret>\n            <div className=\"editor-language-dropdown-closed-content\">\n              <FontAwesomeIcon icon={faLanguage} fixedWidth /> {this.props.displayValue}\n            </div>\n          </DropdownToggle>\n          <DropdownMenu>{this.renderDropdownItems()}</DropdownMenu>\n        </Dropdown>\n      </div>\n    );\n  }\n}\n","import { connect } from \"react-redux\";\nimport DropdownButton from \"../components/DropdownButton.js\";\nimport { setMostRecentProgram } from \"../../../actions/userDataActions.js\";\n\nconst mapStateToProps = state => {\n  const { mostRecentProgram } = state.userData;\n  let mostRecentLanguage = state.programs.getIn([mostRecentProgram, \"language\"], \"python\");\n  let displayValue = state.programs.getIn([mostRecentProgram, \"name\"], mostRecentProgram);\n\n  let listOfPrograms = state.programs.keySeq().map(id => {\n    return {\n      name: state.programs.getIn([id, \"name\"], id),\n      language: state.programs.getIn([id, \"language\"], \"python\"),\n      key: id,\n    };\n  });\n\n  const dirty = state.programs.getIn([mostRecentProgram, \"dirty\"], false);\n\n  return {\n    dirty,\n    dropdownItems: listOfPrograms,\n    displayValue,\n    currentLanguage: mostRecentLanguage,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSelect: value => {\n      dispatch(setMostRecentProgram(value));\n    },\n  };\n};\n\nconst DropdownButtonContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(DropdownButton);\n\nexport default DropdownButtonContainer;\n","const getProcessingSrcDocLoggingScript = code => `\n    <script type=\"text/javascript\">\n      if (typeof console  != \"undefined\")\n        if (typeof console.log != 'undefined')\n          console.olog = console.log;\n        else\n          console.olog = function() {};\n\n      console.log = (message) => {\n        console.olog(message);\n        let a = document.getElementById(\"inner\")\n        if(a){\n          // a.style.display = \"block\"\n          a.value = a.value + \"> \" + message + \"\\\\n\";\n          if(a.scrollTop >= (a.scrollHeight - a.offsetHeight) - a.offsetHeight){\n            a.scrollTop = a.scrollHeight\n          }\n        }\n      };\n\n      window.onerror = (err)=> {\n        let a = document.getElementById(\"outer\")\n        if(a){\n          a.style.display = \"block\"\n        }\n        console.log(\"\\\\n\\\\nERROR: \" + err + \"\\\\n\")\n      }\n\n      console.error = console.debug = console.info = console.log;\n\n      function closeConsole(){\n        var mypre = document.getElementById(\"inner\");\n        mypre.style.display = \"none\"\n      }\n    </script>\n  `;\n\nconst getUserScript = code => `\n  <script type=\"text/javascript\">\n    ${code}\n  </script>\n`;\n\nconst getProcessingSrcDocBody = (code, showConsole) => `\n    <body>\n      ${\n        showConsole\n          ? `<div id=\"outer\"><textarea id=\"inner\"></textarea></div>`\n          : `<div id=\"outer\" style=\"display:none;\"><textarea id=\"inner\"></textarea></div>`\n      }\n      ${getProcessingSrcDocLoggingScript(code)}\n      ${getUserScript(code)}\n    </body>\n  `;\n\nconst getProcessingSrcDocHead = () => `\n    <head>\n        <style>html,body: {margin:0, width:100%}</style>\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/p5.min.js\"></script>\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.dom.min.js\"></script>\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.sound.min.js\"></script>\n        <style>\n          #inner {\n            height:100px;\n            background-color:#222;\n            color: #DDD;\n            font-family: monospace;\n            word-wrap:break-word;\n            overflow:auto;\n            margin: 10px auto;\n            position:relative;\n            padding: 10px 35px 10px 10px;\n            width: 100%;\n            box-sizing: border-box;         /* For IE and modern versions of Chrome */\n            -moz-box-sizing: border-box;    /* For Firefox                          */\n            -webkit-box-sizing: border-box; /* For Safari                           */\n          }\n          #output { margin: 0px 10px; display: block; position: relative;}\n          #closeConsoleButton { position: fixed; top: 20px; right: 30px; color: #ddd;}\n        </style>\n    </head>\n  `;\n\nexport default function(code, showConsole) {\n  return `<html> ${getProcessingSrcDocHead()} ${getProcessingSrcDocBody(code, showConsole)}</html>`;\n}\n","const getPythonSrcDocHead = () => `\n<head>\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js\" type=\"text/javascript\"></script>\n  <script src=\"https://cdn.rawgit.com/skulpt/skulpt-dist/1.1.0/skulpt.min.js\" type=\"text/javascript\"></script>\n  <script src=\"https://cdn.rawgit.com/skulpt/skulpt-dist/1.1.0/skulpt-stdlib.js\" type=\"text/javascript\"></script>\n  <style> html, body { margin:0; background-color: #585166;}\n          #inner {\n            height:100px;\n            background-color:#222;\n            color: #DDD;\n            font-family: monospace;\n            word-wrap:break-word;\n            overflow:auto;\n            margin: 10px auto;\n            position:relative;\n            padding: 10px 35px 10px 10px;\n            width: 100%;\n            box-sizing: border-box;         /* For IE and modern versions of Chrome */\n            -moz-box-sizing: border-box;    /* For Firefox                          */\n            -webkit-box-sizing: border-box; /* For Safari                           */\n            resize: vertical;\n          }\n          #output { margin: 0px 10px; position: relative;}\n          #mycanvas { margin: 10px; }\n          #closeConsoleButton { position: fixed; top: 20px; right: 30px; color: #ddd;}\n          canvas { border: 1px solid black; }\n  </style>\n</head>\n`;\n\nconst getPythonSrcDocSkulptScript = code => `\n  <script type=\"text/javascript\">\n    var received = false;\n    function outf(text) {\n        var mypre = document.getElementById(\"inner\");\n        console.log(text)\n        if (text != \"\\\\n\") {\n          received = true\n        } else if (received == true) {\n          received = false\n        } else {\n          received = true\n        }\n        if(received){\n          mypre.value = mypre.value + \"> \" + text + \"\\\\n\";\n        }\n        if(mypre.scrollTop >= (mypre.scrollHeight - mypre.offsetHeight) - mypre.offsetHeight){\n          mypre.scrollTop = mypre.scrollHeight\n        }\n    }\n\n    function closeConsole(){\n      var mypre = document.getElementById(\"inner\");\n      mypre.style.display = \"none\"\n    }\n\n    function builtinRead(x) {\n        if (Sk.builtinFiles === undefined || Sk.builtinFiles[\"files\"][x] === undefined)\n                throw \"File not found: '\" + x + \"'\";\n        return Sk.builtinFiles[\"files\"][x];\n    }\n\n    function runit() {\n        var prog = atob('${code}');\n        // console.log(prog)\n        //if you want to debug, you can uncomment this console log to see the code being run\n        //console.log(prog)\n        var mypre = document.getElementById(\"output\");\n        // mypre.innerHTML = '<div id=\"inner\"><div id=\"closeConsoleButton\" onclick=\"closeConsole()\" title=\"Hide Console\">X</div></div>';\n        mypre.innerHTML = '<textarea id=\"inner\" readonly></textarea>';\n        Sk.pre = \"output\";\n        Sk.configure({output:outf, read:builtinRead});\n        (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'mycanvas';\n        var myPromise = Sk.misceval.asyncToPromise(function() {\n\n            return Sk.importMainWithBody(\"<stdin>\", false, prog, true);\n        });\n        myPromise.then(function(mod) {\n            //console.log('success');\n        },\n        function(err) {\n            console.log(err.toString());\n            let b = document.getElementById(\"output\")\n            if(b){\n              console.log(\"output found\")\n              b.style.display = \"block\"\n            }\n            let a = document.getElementById(\"inner\")\n            a.value += '\\\\nERROR: ' + err.toString() + \"\\\\n\"\n        });\n    }\n  </script>\n`;\n\nconst getPythonSrcDocBody = (code, showConsole) => {\n  return `\n    <body onload=\"runit()\">\n      ${getPythonSrcDocSkulptScript(code)}\n      ${showConsole ? `<div id=\"output\"> </div>` : `<div id=\"output\" style=\"display:none;\"> </div>`}\n      <div id=\"mycanvas\"></div>\n    </body>\n  `;\n};\n\nexport default function(code, showConsole) {\n  return `<html> ${getPythonSrcDocHead()} ${getPythonSrcDocBody(code, showConsole)} </html>`;\n}\n","import React from \"react\";\nimport { PYTHON, JAVASCRIPT, CPP, JAVA, HTML, PROCESSING } from \"../../../constants\";\nimport { OUTPUT_ONLY } from \"../constants\";\nimport EditorRadio from \"./EditorRadio\";\nimport OpenPanelButtonContainer from \"../../common/containers/OpenPanelButtonContainer\";\nimport DropdownButtonContainer from \"../containers/DropdownButtonContainer\";\nimport CreateProcessingDoc from \"./Output/Processing\";\nimport CreatePythonDoc from \"./Output/Python\";\n\nimport { Button } from \"reactstrap\";\n\nimport { faPlay } from \"@fortawesome/free-solid-svg-icons\";\nimport { faTerminal } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\n/**--------Props--------\n * None\n */\n\nclass Output extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      //used for the refresh button\n      counter: 0,\n      run: 0,\n      showConsole: true,\n    };\n    this.firstLoad = true;\n  }\n\n  //==============React Lifecycle Functions===================//\n  shouldComponentUpdate = (nextProps, nextState) => {\n    if (this.state.showConsole !== nextState.showConsole) {\n      return true;\n    }\n\n    if (this.props.mostRecentProgram !== nextProps.mostRecentProgram) {\n      this.firstLoad = true;\n      return true;\n    }\n\n    if (\n      this.state.run !== nextState.run ||\n      this.state.counter !== nextState.counter ||\n      this.state.showConsole !== nextState.showConsole\n    ) {\n      this.firstLoad = false;\n      return true;\n    }\n    return false;\n  };\n\n  // a bit hacky, but we're re-rendering the output\n  // by updating the state in a novel way\n  reRenderOutput = () => {\n    this.setState(prevState => ({\n      counter: prevState.counter + 1,\n    }));\n  };\n\n  renderIframe = getSrcDoc => {\n    //check if getsrcdoc is a function\n    if (!getSrcDoc && {}.toString.call(getSrcDoc) === \"[object Function]\") {\n      console.log(\"Null src doc function found\");\n      return null;\n    }\n\n    return (\n      <iframe\n        id={this.state.counter + \" \" + this.state.run}\n        key={this.state.counter + \" \" + this.state.run}\n        className=\"editor-output-iframe\"\n        style={{ height: this.props.screenHeight - 61 + \"px\" }}\n        srcDoc={getSrcDoc()}\n        src=\"\"\n        title=\"output-iframe\"\n        onLoad={e => {\n          // console.log(e);\n        }}\n      />\n    );\n  };\n\n  renderOutput = () => {\n    let { language, runResult } = this.props;\n    const { showConsole } = this.state;\n\n    if (this.firstLoad) {\n      return null;\n    }\n\n    //if there's nothing to run, don't render an output\n    if (!runResult || !runResult.length) {\n      return null;\n    }\n\n    let srcDocFunc = () => runResult;\n\n    switch (language) {\n      case PROCESSING:\n        srcDocFunc = () => CreateProcessingDoc(runResult, showConsole);\n        break;\n      case PYTHON:\n        runResult = btoa(runResult);\n        srcDocFunc = () => CreatePythonDoc(runResult, showConsole);\n        break;\n      case JAVA:\n      case JAVASCRIPT:\n      case CPP:\n      case HTML:\n      default:\n        break;\n    }\n\n    return this.renderIframe(srcDocFunc);\n  };\n\n  renderOpenPanelButton = () => this.props.viewMode === OUTPUT_ONLY && <OpenPanelButtonContainer />;\n\n  renderLanguageDropdown = () => this.props.viewMode === OUTPUT_ONLY && <DropdownButtonContainer />;\n\n  renderRadio = () =>\n    this.props.viewMode === OUTPUT_ONLY && (\n      <div style={{ marginLeft: \"auto\" }}>\n        <EditorRadio\n          viewMode={this.props.viewMode}\n          updateViewMode={this.props.updateViewMode}\n          isSmall={this.props.isSmall}\n        />\n      </div>\n    );\n\n  toggleConsole = () => {\n    this.setState(prevState => {\n      return { showConsole: !prevState.showConsole };\n    });\n  };\n\n  renderConsoleButton = () => (\n    <Button\n      className=\"mx-2\"\n      color={this.state.showConsole ? \"danger\" : \"primary\"}\n      onClick={this.toggleConsole}\n      title={this.state.showConsole ? \"Hide Console\" : \"Show Console\"}\n      size=\"lg\"\n    >\n      <FontAwesomeIcon icon={faTerminal} />\n    </Button>\n  );\n\n  renderBanner = () => (\n    <div className=\"editor-output-banner\">\n      {this.renderOpenPanelButton()}\n      {this.renderLanguageDropdown()}\n      <div style={{ flex: \"1 1 auto\" }}> </div> {/*whitespace*/}\n      {this.renderRadio()}\n      {this.renderConsoleButton()}\n      <Button className=\"mx-2\" color=\"primary\" size=\"lg\" onClick={this.runCode}>\n        <FontAwesomeIcon icon={faPlay} />\n        {!this.props.isSmall && <span className=\"editor-button-text\">&nbsp;&nbsp;Run</span>}\n      </Button>\n    </div>\n  );\n\n  runCode = () => {\n    this.setState(prevState => ({\n      run: prevState.run + 1,\n    }));\n  };\n\n  render() {\n    return (\n      <div className=\"editor-output\">\n        {this.renderBanner()}\n        <div>{this.renderOutput()}</div>\n      </div>\n    );\n  }\n}\n\nexport default Output;\n","import { connect } from \"react-redux\";\nimport Output from \"../components/Output.js\";\n\nconst mapStateToProps = state => {\n  const { mostRecentProgram } = state.userData;\n  return {\n    mostRecentProgram,\n    runResult: state.programs.getIn([mostRecentProgram, \"code\"]),\n    language: state.programs.getIn([mostRecentProgram, \"language\"]),\n    screenHeight: state.ui.screenHeight,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    clearOutput: () => {},\n  };\n};\n\nconst OutputContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Output);\n\nexport default OutputContainer;\n","import constants from \"../constants\";\n\n/**---------getUserData--------\n * fetches object from server containg information about user at uid\n * includes users' programs in json if includePrograms is true\n * returned json will be of the form\n * {\n *   ok:    boolean that's true if no error occured in the server\n *   data:{\n *    userData: json of the users data such as displayName, photoURL, mostRecentProgram, etc.\n *    programs: json of each program\n *          each program is keyed by the program name and its value is a json containing at\n *          two keys. code is the code and language is the language the code is written in\n *   }\n * }\n */\nexport const getUserData = async (uid = \"\", includePrograms = false) => {\n  const getUserDataEndpoint = (uid = \"\", includePrograms = false) =>\n    `${constants.SERVER_URL}/getUserData/${uid}${includePrograms ? \"?programs=true\" : \"\"}`;\n\n  const options = {\n    method: \"get\",\n    mode: \"cors\", // no-cors, cors, *same-origin\n  };\n\n  try {\n    let result = await fetch(getUserDataEndpoint(uid, includePrograms), options);\n    let { ok, data, error } = await result.json();\n\n    return { ok, data, error };\n  } catch (err) {\n    return { ok: \"false\", error: \"SERVER ERROR: Unable to get user data from server\", err: err };\n  }\n};\n\n/**\n * makeServerRequest: a generic POST request handler to our backend\n * @param {Object} data JSON data passed to endpoint; stringified into body of request\n * @param {string} endpoint API endpoint to hit, rooted at ${constants.SERVER_URL}/\n * @param {string} method HTTP method to make the request, defaults to post\n */\n\nconst makeServerRequest = (data, endpoint, method = \"post\") => {\n  let body = \"\";\n\n  // if the passed-in data object has at least 1 key, set the body to the stringified data object\n  try {\n    if (Object.keys(data).length) {\n      body = JSON.stringify(data);\n    }\n  } catch (err) {\n    console.log(err);\n    return;\n  }\n\n  const options = {\n    method: method,\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    },\n    body,\n  };\n\n  return fetch(`${constants.SERVER_URL}/${endpoint}`, options);\n};\n\n/**\n * merges the JSON Parameter programs with the user document in Firestore; selectively updates based on passed-in keys\n * @param {string} uid UID of user to selectively update programs\n * @param {Object} programs object that contains only the keys of the project that need to be updated\n */\n\nexport const updatePrograms = (uid = \"\", programs) => {\n  const endpoint = `updatePrograms/${uid}`;\n  return makeServerRequest(programs, endpoint, \"put\");\n};\n\n/**\n * merges the JSON parameter userData with the user document in Firestore; selectively updates based on passed-in keys\n * @param {string} uid UID for the user to update\n * @param {Object} userData object that contains only the keys of the user data that need to be updated\n */\n\nexport const updateUserData = (uid = \"\", userData) => {\n  const endpoint = `updateUserData/${uid}`;\n  return makeServerRequest(userData, endpoint);\n};\n\n/**\n * creates a sketch in Firestore with passed-in data\n * @param {Object} data required data to create program - might eventually become enumerated\n */\n\nexport const createSketch = data => {\n  return makeServerRequest(data, \"createProgram\");\n};\n\n/**\n * deletes a sketch in Firestore with given docID\n * @param {Object} data required data to delete program (uid, docID, name)\n */\n\nexport const deleteSketch = data => {\n  return makeServerRequest(data, \"deleteProgram\");\n};\n","import React from \"react\";\nimport { CODEMIRROR_CONVERSIONS } from \"../../../constants\";\nimport * as fetch from \"../../../lib/fetch.js\";\n\nlet CodeMirror = null;\nif (typeof window !== \"undefined\" && typeof window.navigator !== \"undefined\") {\n  // import {Controlled as CodeMirror} from 'react-codemirror2'\n  CodeMirror = require(\"react-codemirror2\").Controlled;\n  require(\"codemirror/mode/javascript/javascript.js\");\n  require(\"codemirror/mode/htmlmixed/htmlmixed.js\");\n  require(\"codemirror/mode/python/python.js\");\n  require(\"codemirror/mode/clike/clike.js\");\n}\n/**----------Props--------\n * None\n */\n\nclass TextEditor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      codeMirrorInstance: null,\n      currentLine: 0,\n    };\n  }\n\n  //==============React Lifecycle Functions===================//\n  componentDidMount() {\n    window.addEventListener(\"beforeunload\", this.onLeave);\n    window.addEventListener(\"close\", this.onLeave);\n  }\n\n  componentWillUnmount = () => {\n    window.removeEventListener(\"beforeunload\", this.onLeave);\n    window.removeEventListener(\"close\", this.onLeave);\n  };\n\n  checkDirty = async () => {\n    if (!this.props.dirty) {\n      return;\n    }\n\n    try {\n      let programToUpdate = {};\n      programToUpdate[this.props.mostRecentProgram] = {\n        code: this.props.code,\n      };\n\n      await fetch.updatePrograms(this.props.uid, programToUpdate);\n      //TODO: add functionality to be able to tell whether the fetch failed\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  onLeave = async ev => {\n    if (this.props.dirty) {\n      ev.returnValue = \"\";\n    }\n    return ev;\n  };\n\n  setCodeMirrorInstance = codeMirrorInstance => {\n    this.setState({ codeMirrorInstance });\n  };\n\n  updateCode = (editor, data, newCode) => {\n    //if the code's not yet dirty, and the old code is different from the new code, make it dirty\n    if (!this.props.dirty && this.props.code !== newCode) {\n      this.props.dirtyCode(this.props.mostRecentProgram);\n    }\n    this.props.setProgramCode(this.props.mostRecentProgram, newCode);\n  };\n\n  setCurrentLine = cm => {\n    const { codeMirrorInstance, currentLine } = this.state;\n    let { line } = cm.getCursor();\n    if (codeMirrorInstance) {\n      //removeLineClass removes the back highlight style from the last selected line\n      codeMirrorInstance.removeLineClass(currentLine, \"wrap\", \"selected-line\");\n      //addLineClass adds the style to the newly selected line\n      codeMirrorInstance.addLineClass(line, \"wrap\", \"selected-line\");\n    }\n    this.setState({ currentLine: line });\n  };\n\n  render() {\n    //json required by CodeMirror\n    const options = {\n      mode: CODEMIRROR_CONVERSIONS[this.props.language],\n      theme: \"material\", //requires lots of CSS tuning to get a theme to work, be wary of changing\n      lineNumbers: true, //text editor has line numbers\n      lineWrapping: true, //text editor does not overflow in the x direction, uses word wrap (NOTE: it's like MO Word wrapping, so words are not cut in the middle, if a word overlaps, the whole word is brought to the next line)\n      indentWithTabs: true,\n    };\n\n    return (\n      <CodeMirror\n        editorDidMount={codeMirrorInstance => {\n          codeMirrorInstance.refresh();\n          this.setCodeMirrorInstance(codeMirrorInstance);\n        }}\n        value={this.props.code}\n        lineWrapping\n        indentWithTabs={true}\n        options={options}\n        onCursor={cm => {\n          this.setCurrentLine(cm);\n        }}\n        onBeforeChange={this.updateCode}\n        onChange={this.updateCode}\n      />\n    );\n  }\n}\n\nexport default TextEditor;\n","export const SET_PROGRAM_CODE = \"SET_PROGRAM_CODE\";\nexport function setProgramCode(program, value) {\n  return { type: SET_PROGRAM_CODE, program, value };\n}\n\nexport const SET_PROGRAM_LANGUAGE = \"SET_PROGRAM_LANGUAGE\";\nexport function setProgramLanguage(program, value) {\n  return { type: SET_PROGRAM_LANGUAGE, program, value };\n}\n\nexport const SET_PROGRAM_NAME = \"SET_PROGRAM_NAME\";\nexport function setProgramName(program, value) {\n  return { type: SET_PROGRAM_NAME, program, value };\n}\n\nexport const SET_PROGRAM_THUMBNAIL = \"SET_PROGRAM_THUMBNAIL\";\nexport function setProgramThumbnail(program, value) {\n  return { type: SET_PROGRAM_THUMBNAIL, program, value };\n}\n\nexport const DELETE_PROGRAM = \"DELETE_PROGRAM\";\nexport function deleteProgram(program) {\n  return { type: DELETE_PROGRAM, program };\n}\n\nexport const LOAD_PROGRAMS = \"LOAD_PROGRAMS\";\nexport function loadPrograms(programs) {\n  return { type: LOAD_PROGRAMS, programs };\n}\n\nexport const CLEAR_PROGRAMS = \"CLEAR_PROGRAMS\";\nexport function clearPrograms() {\n  return { type: CLEAR_PROGRAMS };\n}\n\nexport const SET_PROGRAM_DIRTY = \"SET_PROGRAM_DIRTY\";\nexport function setProgramDirty(program, value) {\n  return { type: SET_PROGRAM_DIRTY, program, value };\n}\n\nexport const ADD_PROGRAM = \"ADD_PROGRAM\";\nexport function addProgram(program, data) {\n  return { type: ADD_PROGRAM, program, data };\n}\n","import Immutable from \"immutable\";\nimport TextEditor from \"../components/TextEditor\";\nimport { connect } from \"react-redux\";\nimport { setProgramCode, setProgramDirty } from \"../../../actions/programsActions.js\";\n\nconst mapStateToProps = state => {\n  const { uid, mostRecentProgram } = state.userData;\n\n  //program data should be an object representing the most recent program\n  //should have 2 keys, code (which is the code) and langauge (which is the language the code is written it)\n  // add key dirty\n  const programData = state.programs.get(mostRecentProgram, Immutable.Map()).toJS();\n\n  return {\n    ...programData,\n    mostRecentProgram,\n    uid,\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    setProgramCode: (program, code) => {\n      dispatch(setProgramCode(program, code));\n    },\n    dirtyCode: program => {\n      dispatch(setProgramDirty(program, true));\n    },\n  };\n};\n\nconst TextEditorContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(TextEditor);\n\nexport default TextEditorContainer;\n","import ProcessingConstructor from \"./../../components/Editor/components/Output/Processing\";\n\nexport default class CodeDownloader {\n  static download = (name, language, code) => {\n    let extension = \".\";\n    switch (language) {\n      case \"python\":\n        extension += \"py\";\n        break;\n      case \"processing\": // this is because we construct the processing result as an HTML file. jank.\n      case \"html\":\n        extension += \"html\";\n        break;\n      default:\n        extension += \"txt\";\n    }\n    // taken from this: https://stackoverflow.com/questions/44656610/download-a-string-as-txt-file-in-react\n    const element = document.createElement(\"a\");\n    let file;\n    if (language === \"processing\") {\n      file = new Blob([ProcessingConstructor(code, true)], { type: \"text/plain\" });\n    } else {\n      file = new Blob([code], { type: \"text/plain\" });\n    }\n    element.href = URL.createObjectURL(file);\n    element.download = name + extension;\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  };\n}\n","import React from \"react\";\nimport SplitPane from \"react-split-pane\";\nimport { Button } from \"reactstrap\";\nimport OutputContainer from \"./containers/OutputContainer.js\";\nimport TextEditorContainer from \"./containers/TextEditorContainer\";\nimport DropdownButtonContainer from \"./containers/DropdownButtonContainer\";\nimport OpenPanelButtonContainer from \"../common/containers/OpenPanelButtonContainer\";\nimport * as fetch from \"../../lib/fetch.js\";\nimport EditorRadio from \"./components/EditorRadio.js\";\nimport { Redirect } from \"react-router-dom\";\nimport { EDITOR_WIDTH_BREAKPOINT, CODE_AND_OUTPUT, CODE_ONLY, OUTPUT_ONLY } from \"./constants\";\nimport CodeDownloader from \"./../../util/languages/CodeDownloader\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSave } from \"@fortawesome/free-solid-svg-icons\";\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\n\nimport { PANEL_SIZE } from \"../../constants\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/material.css\";\nimport \"styles/CustomCM.scss\";\nimport \"styles/Resizer.scss\";\nimport \"styles/Editor.scss\";\n\n/**------Props-------\n * togglePanel: function to call when you want the Profile Panel to disappear/reapper\n * panelOpen: boolean telling whether the Profile Panel is open or not\n * left: the left css property that should be applied on the top level element\n */\n\nclass Editor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      saveText: \"Save\",\n      viewMode: (this.props.screenWidth <= EDITOR_WIDTH_BREAKPOINT) ? CODE_ONLY : CODE_AND_OUTPUT,\n      redirect: (this.props.listOfPrograms.length === 0) ? \"/sketches\" : \"\",\n      pane1Style: { transition: \"width .5s ease\" },\n    };\n  }\n\n  //==============React Lifecycle Functions Start===================//\n  componentDidUpdate(prevProps) {\n    if (this.props.screenWidth !== prevProps.screenWidth) {\n      if (this.props.screenWidth <= EDITOR_WIDTH_BREAKPOINT) {\n        if (this.state.viewMode === CODE_AND_OUTPUT) {\n          this.setState({ viewMode: CODE_ONLY });\n        }\n      }\n    }\n  }\n\n  resetSaveText = () => {\n    this.setState({\n      saveText: \"Save\",\n    });\n  };\n\n  handleSave = event => {\n    if (!this.props.dirty) return; // Don't save if not dirty (unedited)\n    this.setState({\n      saveText: \"Saving...\",\n    });\n\n    let programToUpdate = {};\n\n    programToUpdate[this.props.mostRecentProgram] = {\n      code: this.props.code,\n    };\n\n    fetch.updatePrograms(this.props.uid, programToUpdate).then(() => {\n      this.setState({\n        saveText: \"Saved!\",\n      });\n\n      setTimeout(this.resetSaveText, 3000);\n    });\n    this.props.cleanCode(this.props.mostRecentProgram); // Set code's \"dirty\" state to false\n  };\n\n  handleDownload = () => {\n    CodeDownloader.download(this.props.name, this.props.language, this.props.code);\n  };\n\n  renderDropdown = () => <DropdownButtonContainer />;\n\n  renderCodeAndOutput = () => (\n    <SplitPane\n      resizerStyle={{\n        height: \"67px\",\n        borderLeft: \"2px solid #333\",\n        borderRight: \"2px solid #333\",\n        width: \"10px\",\n      }}\n      pane1Style={this.state.pane1Style}\n      //functions called when you start and finish a drag\n      //removes and re-addsthe transition effect on the first panel when manually resizing\n      onDragStarted={() => this.setState({ pane1Style: {} })}\n      onDragFinished={() => this.setState({ pane1Style: { transition: \"width .5s ease\" } })}\n      split=\"vertical\" //the resizer is a vertical line (horizontal means resizer is a horizontal bar)\n      minSize={\n        (this.props.panelOpen ? this.props.screenWidth - PANEL_SIZE : this.props.screenWidth) * 0.33\n      } //minimum size of code is 33% of the remaining screen size\n      maxSize={\n        (this.props.panelOpen ? this.props.screenWidth - PANEL_SIZE : this.props.screenWidth) * 0.75\n      } //max size of code is 75% of the remaining screen size\n      size={\n        ((this.props.panelOpen ? this.props.screenWidth - PANEL_SIZE : this.props.screenWidth) /\n          5) *\n        3\n      } //the initial size of the text editor section\n      allowResize={true}\n    >\n      {this.renderCode()}\n      {this.renderOutput()}\n    </SplitPane>\n  );\n\n  updateViewMode = viewMode => {\n    this.setState({ viewMode });\n  };\n\n  renderCode = () => (\n    <div className=\"code-section\">\n      <div className=\"code-section-banner\">\n        <OpenPanelButtonContainer />\n        {this.renderDropdown()}\n        <div style={{ marginLeft: \"auto\", marginRight: \".5rem\" }}>\n          <EditorRadio\n            viewMode={this.state.viewMode}\n            updateViewMode={this.updateViewMode}\n            isSmall={this.props.screenWidth <= EDITOR_WIDTH_BREAKPOINT}\n          />\n        </div>\n        <Button className=\"mx-2\" color=\"success\" size=\"lg\" onClick={this.handleSave}>\n          <FontAwesomeIcon icon={faSave} />\n          {this.props.screenWidth > EDITOR_WIDTH_BREAKPOINT && (\n            <span className=\"editor-button-text\">&nbsp;&nbsp;{this.state.saveText}</span>\n          )}\n        </Button>\n\n        <Button className=\"mx-2\" color=\"success\" size=\"lg\" onClick={this.handleDownload}>\n          <FontAwesomeIcon icon={faDownload} />\n        </Button>\n      </div>\n      <div\n        className=\"text-editor-container\"\n        style={{\n          height: this.props.screenHeight - 61 - 20,\n          minHeight: this.props.screenHeight - 61 - 20,\n          maxHeight: this.props.screenHeight - 61 - 20,\n        }}\n      >\n        <TextEditorContainer key={this.props.mostRecentProgram} />\n      </div>\n    </div>\n  );\n\n  renderOutput = () => (\n    <OutputContainer\n      viewMode={this.state.viewMode}\n      updateViewMode={this.updateViewMode}\n      isSmall={this.props.screenWidth <= EDITOR_WIDTH_BREAKPOINT}\n    />\n  );\n\n  renderContent = () => {\n    const codeStyle = {\n      width: this.props.screenWidth - (this.props.left || 0),\n      height: this.props.screenHeight,\n    };\n\n    switch (this.state.viewMode) {\n      case CODE_ONLY:\n        return <div style={codeStyle}>{this.renderCode()}</div>;\n      case OUTPUT_ONLY:\n        return <div style={codeStyle}>{this.renderOutput()}</div>;\n      default:\n        return this.renderCodeAndOutput();\n    }\n  };\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={this.state.redirect} />;\n    }\n\n    const codeStyle = {\n      left: this.props.left || 0,\n      width: this.props.screenWidth - (this.props.left || 0),\n      height: this.props.screenHeight,\n    };\n\n    return (\n      <div className=\"editor\" style={codeStyle}>\n        {this.renderContent()}\n      </div>\n    );\n  }\n}\n\nexport default Editor;\n","export const CLEAR_OUTPUT = \"CLEAR_OUTPUT\";\nexport function clearOutput() {\n  return { type: CLEAR_OUTPUT };\n}\n\nexport const SET_RUN_RESULT = 'SET_RUN_RESULT'\nexport function setRunResult(value){\n  return {type: SET_RUN_RESULT, value}\n}\n\nexport const SET_OUTPUT_LANGUAGE = 'SET_OUTPUT_LANGAUGE'\nexport function setOutputLanguage(value){\n  return {type: SET_OUTPUT_LANGUAGE, value}\n}\n\nexport const SET_OUTPUT = 'SET_OUTPUT'\nexport function setOutput({output}){\n  //if output is not an object\n  if(!output){\n    return {type:\"IGNORE\"}\n  }\n  return {type:SET_OUTPUT, runResult:output.code, language: output.language}\n}","import Editor from \"../index.js\";\nimport { connect } from \"react-redux\";\nimport { setOutput } from \"../../../actions/outputActions.js\";\nimport { setMostRecentProgram } from \"../../../actions/userDataActions.js\";\nimport { setProgramDirty } from \"../../../actions/programsActions.js\";\nimport { togglePanel } from \"../../../actions/uiActions.js\";\nimport { CLOSED_PANEL_LEFT, OPEN_PANEL_LEFT, PANEL_SIZE } from \"../../../constants\";\n\nconst mapStateToProps = state => {\n  const { mostRecentProgram } = state.userData;\n\n  //program data should be an object representing the most recent program\n  //should have 2 keys, code (which is the code) and langauge (which is the language the code is written it)\n  const code = state.programs.getIn([mostRecentProgram, \"code\"], undefined);\n  const dirty = state.programs.getIn([mostRecentProgram, \"dirty\"], false);\n  const name = state.programs.getIn([mostRecentProgram, \"name\"], \"untitled\");\n  const language = state.programs.getIn([mostRecentProgram, \"language\"], \"txt\");\n\n  let listOfPrograms = [];\n\n  state.programs.keySeq().forEach(key => listOfPrograms.push(key));\n\n  return {\n    uid: state.userData.uid,\n    mostRecentProgram,\n    code,\n    listOfPrograms,\n    screenWidth: state.ui.screenWidth,\n    screenHeight: state.ui.screenHeight,\n    dirty,\n    panelOpen: state.ui.panelOpen,\n    left: (state.ui.panelOpen ? OPEN_PANEL_LEFT : CLOSED_PANEL_LEFT) + PANEL_SIZE,\n    name,\n    language,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setMostRecentProgram: value => dispatch(setMostRecentProgram(value)),\n    runCode: (code, language) => dispatch(setOutput(code, language)),\n    cleanCode: program => dispatch(setProgramDirty(program, false)),\n    togglePanel: () => dispatch(togglePanel()),\n  };\n};\n\nconst EditorContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Editor);\n\nexport default EditorContainer;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"styles/SketchBox.scss\";\n\nimport { Row, Col } from \"reactstrap\";\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\nimport { faEdit } from \"@fortawesome/free-solid-svg-icons\";\nimport { faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nclass SketchBox extends React.Component {\n  render() {\n    return (\n      <div className=\"sketch-box\">\n        <Link\n          className=\"sketch-box-body\"\n          onClick={this.props.redirFunc}\n          to={{ pathname: \"/editor\" }}\n        >\n          <img\n            alt={\"User's sketch icon\"}\n            src={`${process.env.PUBLIC_URL}/img/sketch-thumbnails/${this.props.img}.svg`}\n            className=\"sketch-thumbnail mt-2\"\n          />\n          <div className=\"sketch-metadata\">\n            <b className=\"sketch-name\">{this.props.name}</b>\n            <FontAwesomeIcon className=\"sketch-icon\" icon={this.props.icon} />\n          </div>\n        </Link>\n        <hr className=\"sketch-divider\" />\n        <Row className=\"sketch-box-body\">\n          <Col className=\"p-2 text-center\" onClick={this.props.editFunc}>\n            <FontAwesomeIcon className=\"fa-lg\" icon={faEdit} />\n          </Col>\n          <div className=\"sketch-button-divider\" />\n          <Col className=\"p-2 text-center\" onClick={this.props.downloadFunc}>\n            <FontAwesomeIcon className=\"fa-lg\" icon={faDownload} />\n          </Col>\n          <div className=\"sketch-button-divider\" />\n          <Col className=\"p-2 text-center\" onClick={this.props.deleteFunc}>\n            <FontAwesomeIcon className=\"fa-lg\" icon={faTrashAlt} />\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default SketchBox;\n","import React from \"react\";\nimport ReactModal from \"react-modal\";\nimport { Container, Row, Col, Button } from \"reactstrap\";\nimport * as fetch from \"../../../lib/fetch.js\";\n\nclass ConfirmDeleteModal extends React.Component {\n  closeModal = () => {\n    if (this.props.onClose && {}.toString.call(this.props.onClose) === \"[object Function]\") {\n      this.props.onClose();\n    }\n  };\n\n  onDeleteSubmit = () => {\n    let data = {\n      uid: this.props.uid,\n      docID: this.props.sketchKey,\n      name: this.props.sketchKey,\n    };\n    try {\n      fetch\n        .deleteSketch(data)\n        .then(res => {\n          return res.json();\n        })\n        .then(json => {\n          if (!json.ok) {\n            this.setState({\n              spinner: false,\n              error: json.error || \"Failed to create sketch, please try again later\",\n            });\n            return;\n          }\n          this.props.deleteProgram(this.props.sketchKey);\n          this.closeModal();\n        })\n        .catch(err => {\n          this.setState({\n            spinner: false,\n            error: \"Failed to create sketch, please try again later\",\n          });\n          console.log(err);\n        });\n    } catch (err) {\n      console.log(err);\n    }\n    this.setState({ spinner: true, error: \"\" });\n  };\n\n  render() {\n    return (\n      <ReactModal\n        isOpen={this.props.isOpen}\n        onRequestClose={this.closeModal}\n        className=\"sketches-modal\"\n        ariaHideApp={false}\n      >\n        <Container>\n          <h2 className=\"text-center\">\n            Are you sure you want to delete \"{this.props.sketchName}\"?\n          </h2>\n          <hr />\n          <Row>\n            <Col>\n              <Button color=\"secondary\" onClick={this.closeModal} size=\"lg\" block>\n                No thanks!\n              </Button>\n            </Col>\n            <Col>\n              <Button color=\"danger\" onClick={this.onDeleteSubmit} size=\"lg\" block>\n                Delete Forever!\n              </Button>\n            </Col>\n          </Row>\n        </Container>\n      </ReactModal>\n    );\n  }\n}\n\nexport default ConfirmDeleteModal;\n","import ConfirmDeleteModal from \"../components/ConfirmDeleteModal.js\";\nimport { connect } from \"react-redux\";\nimport { deleteProgram } from \"../../../actions/programsActions\";\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.userData.uid,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    deleteProgram: (program, data) => dispatch(deleteProgram(program, data)),\n  };\n};\n\nconst ConfirmDeleteModalContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ConfirmDeleteModal);\n\nexport default ConfirmDeleteModalContainer;\n","import React from \"react\";\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from \"reactstrap\";\n\n/**--------Props---------------\n * dropdownItems: array of strings, each string being the name of a Program\n * displayValue: string to be displayed as the placeholder for the dropdown\n * onSelect: function called when an item is selected in the dropdown\n */\n/**--------Optional props--------\n * defaultOpen: boolean determining if the dropdown should start off open or closed\n */\n\nexport default class DropdownButton extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dropdownOpen: this.props.defaultOpen || false,\n    };\n  }\n\n  //==============React Lifecycle Functions===================//\n  componentDidMount() {}\n\n  toggleHandler = prevVal => {\n    this.setState({ dropdownOpen: !prevVal });\n  };\n\n  renderDropdownItems = () => {\n    //map each program string in the array to a dropdown item\n    return this.props.dropdownItems.map(({ display, value }) => {\n      //if the program doesn't exist, or is an empty string, return null\n      if (!display || !display.length || !value || !value.length) {\n        return null;\n      }\n\n      return (\n        <DropdownItem\n          key={value}\n          onClick={this.props.onSelect ? () => this.props.onSelect({ display, value }) : null}\n        >\n          {display}\n        </DropdownItem>\n      );\n    });\n  };\n\n  render() {\n    //if there's no programs in the dropdownItems, just show the display value\n    if (!this.props.dropdownItems || !this.props.dropdownItems.length) {\n      //TODO: add better error logic for this\n      return this.props.displayValue;\n    }\n\n    return (\n      <div className=\"sketches-language-dropdown\">\n        <Dropdown\n          isOpen={this.state.dropdownOpen}\n          toggle={() => this.toggleHandler(this.state.dropdownOpen)}\n        >\n          <DropdownToggle color=\"primary\" size=\"lg\" caret>\n            <div className=\"sketches-language-dropdown-closed-content\">\n              {this.props.displayValue}\n            </div>\n          </DropdownToggle>\n          <DropdownMenu>{this.renderDropdownItems()}</DropdownMenu>\n        </Dropdown>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport DropdownButton from \"./DropdownButton\";\nimport {\n  SketchThumbnailArray,\n  LanguageDropdownValues,\n  LanguageDropdownDefault,\n} from \"../constants\";\nimport * as fetch from \"../../../lib/fetch.js\";\nimport { Redirect } from \"react-router-dom\";\n\nimport { Button, Container, Row, Col, FormGroup, Label, Input } from \"reactstrap\";\n\nimport ReactModal from \"react-modal\";\n\nimport \"styles/SketchesModal.scss\";\n\nclass CreateSketchModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      language: LanguageDropdownDefault,\n      name: \"\",\n      next: false,\n      thumbnail: -1,\n      disableSubmit: false,\n      error: \"\",\n      redirect: false,\n    };\n  }\n\n  //==============React Lifecycle Functions Start===================//\n\n  closeModal = () => {\n    if (this.props.onClose && {}.toString.call(this.props.onClose) === \"[object Function]\") {\n      this.props.onClose();\n    }\n\n    this.setState({\n      next: false,\n      language: LanguageDropdownDefault,\n      name: \"\",\n      thumbnail: -1,\n      error: \"\",\n      disableSubmit: false,\n    });\n  };\n\n  setNext = val => {\n    this.setState({\n      next: val,\n      error: \"\",\n      disableSubmit: false,\n    });\n  };\n\n  onBack = () => this.setNext(false);\n\n  badThumbnailInput = () => {\n    if (\n      this.state.thumbnail === undefined ||\n      this.state.thumbnail === \"\" ||\n      this.state.thumbnail >= SketchThumbnailArray.length ||\n      this.state.thumbnail < 0\n    ) {\n      // this.setState({error: \"Please select a thumbnail\"})\n      return true;\n    }\n\n    return false;\n  };\n\n  badNameInput = () => {\n    if (!this.state.name) {\n      this.setState({ error: \"Name is required\" });\n      return true;\n    }\n    if (this.state.name.length > 15) {\n      this.setState({ error: \"Name must be 15 characters or less\" });\n      return true;\n    }\n    // if( this.state.name.match(/[^a-zA-Z0-9!@#$%'\" .]/)){\n    //   this.setState({error: \"Sketch name nust be less than 20 characters\"})\n    //   return true\n    // }\n\n    return false;\n  };\n\n  badLanguageInput = () => {\n    if (!this.state.language) {\n      this.setState({ error: \"Please select a language\" });\n      return true;\n    }\n\n    let notFound = true;\n    for (var i = 0; i < LanguageDropdownValues.length; i++) {\n      if (\n        this.state.language.display === LanguageDropdownValues[i].display &&\n        this.state.language.value === LanguageDropdownValues[i].value\n      ) {\n        notFound = false;\n        break;\n      }\n    }\n    if (notFound) {\n      this.setState({ error: \"Invalid language selected\" });\n      return true;\n    }\n\n    return false;\n  };\n\n  onFirstSubmit = e => {\n    e.preventDefault();\n    if (this.badNameInput() || this.badLanguageInput()) {\n      return;\n    }\n    this.setNext(true);\n  };\n\n  onSecondSubmit = async e => {\n    e.preventDefault();\n\n    if (this.badThumbnailInput()) return;\n\n    let data = {\n      uid: this.props.uid,\n      thumbnail: this.state.thumbnail,\n      language: this.state.language.value,\n      name: this.state.name,\n      code: \"\",\n    };\n\n    try {\n      fetch\n        .createSketch(data)\n        .then(res => {\n          return res.json();\n        })\n        .then(json => {\n          if (!json.ok) {\n            this.setState({\n              disableSubmit: false,\n              error: json.error || \"Failed to create sketch, please try again later\",\n            });\n            return;\n          }\n          this.props.addProgram(json.data.key, json.data.programData || {});\n          this.props.setMostRecentProgram(json.data.key);\n          this.setState({ redirect: true });\n          this.closeModal();\n        })\n        .catch(err => {\n          this.setState({\n            disableSubmit: false,\n            error: \"Failed to create sketch, please try again later\",\n          });\n          console.log(err);\n        });\n    } catch (err) {\n      console.log(err);\n    }\n    this.setState({ disableSubmit: true, error: \"\" });\n  };\n\n  renderSecondModal = () => {\n    let icons = SketchThumbnailArray.map((val, index) => {\n      return (\n        <figure\n          className=\"sketches-gallery-item\"\n          key={val}\n          onClick={() => this.setState({ thumbnail: index })}\n        >\n          <img\n            src={`${process.env.PUBLIC_URL}/img/sketch-thumbnails/${val}.svg`}\n            className={\"sketches-gallery-img\" + (this.state.thumbnail === index ? \"-selected\" : \"\")}\n            alt=\"icon\"\n          />\n        </figure>\n      );\n    });\n\n    let thumbnailPreview =\n      this.state.thumbnail !== -1 ? (\n        <img\n          src={`${process.env.PUBLIC_URL}/img/sketch-thumbnails/${\n            SketchThumbnailArray[this.state.thumbnail]\n          }.svg`}\n          className={\"sketches-modal-header-thumbnail\"}\n          alt=\"icon\"\n        />\n      ) : null;\n    return (\n      <ReactModal\n        isOpen={this.props.isOpen}\n        onRequestClose={this.closeModal}\n        className=\"sketches-image-modal\"\n        overlayClassName=\"profile-image-overlay\"\n        ariaHideApp={false}\n      >\n        <Container>\n          <div className=\"sketches-modal-header d-flex align-items-center\">\n            <h1>Choose a thumbnail</h1>\n            <div className=\"sketches-modal-header-thumbnail-container\">{thumbnailPreview}</div>\n          </div>\n          <hr />\n          <div className=\"sketches-gallery\">{icons}</div>\n          <br />\n          <div className=\"text-center text-danger\">{this.state.error || <br />}</div>\n          <hr />\n          <Row>\n            <Col>\n              <Button\n                color=\"secondary\"\n                onClick={this.onBack}\n                disabled={this.state.disableSubmit}\n                size=\"lg\"\n                block\n              >\n                Back\n              </Button>\n            </Col>\n            <Col>\n              <Button\n                color=\"success\"\n                onClick={this.onSecondSubmit}\n                size=\"lg\"\n                disabled={this.badThumbnailInput() || this.state.disableSubmit}\n                block\n              >\n                Create\n              </Button>\n            </Col>\n          </Row>\n        </Container>\n      </ReactModal>\n    );\n  };\n\n  renderFirstModal = () => {\n    return (\n      <ReactModal\n        isOpen={this.props.isOpen}\n        onRequestClose={this.closeModal}\n        className=\"sketches-modal\"\n        overlayClassName=\"profile-image-overlay\"\n        ariaHideApp={false}\n      >\n        <Container>\n          <h1 className=\"text-center\">Create a Sketch</h1>\n          <hr />\n          <FormGroup row>\n            <Label className=\"text-right\" for=\"sketch-name\" xs={4}>\n              Name\n            </Label>\n            <Col xs={8}>\n              <Input\n                onChange={e => this.setState({ name: e.target.value })}\n                value={this.state.name}\n                id=\"sketch-name\"\n              />\n            </Col>\n          </FormGroup>\n          <br />\n          <Row>\n            <Col xs=\"4\" className=\"text-right\">\n              Language\n            </Col>\n            <Col xs=\"8\" className=\"d-flex align-items-center\">\n              <DropdownButton\n                dropdownItems={LanguageDropdownValues}\n                onSelect={lang => this.setState({ language: lang })}\n                displayValue={this.state.language.display || LanguageDropdownDefault.display}\n              />\n            </Col>\n          </Row>\n          <br />\n          <div className=\"text-center text-danger\">{this.state.error || <br />}</div>\n          <hr />\n          <Row>\n            <Col>\n              <Button color=\"danger\" onClick={this.closeModal} size=\"lg\" block>\n                Cancel\n              </Button>\n            </Col>\n            <Col>\n              <Button color=\"success\" onClick={this.onFirstSubmit} size=\"lg\" block>\n                Next\n              </Button>\n            </Col>\n          </Row>\n        </Container>\n      </ReactModal>\n    );\n  };\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to=\"/editor\" />;\n    }\n\n    if (this.state.next) {\n      return this.renderSecondModal();\n    }\n\n    return this.renderFirstModal();\n  }\n}\n\nexport default CreateSketchModal;\n","import CreateSketchModal from \"../components/CreateSketchModal.js\";\nimport { connect } from \"react-redux\";\nimport { addProgram } from \"../../../actions/programsActions\";\nimport { setMostRecentProgram } from \"../../../actions/userDataActions.js\";\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.userData.uid,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addProgram: (program, data) => dispatch(addProgram(program, data)),\n    setMostRecentProgram: value => dispatch(setMostRecentProgram(value)),\n  };\n};\n\nconst CreateSketchModalContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(CreateSketchModal);\n\nexport default CreateSketchModalContainer;\n","import React from \"react\";\nimport ReactModal from \"react-modal\";\nimport { Button } from \"reactstrap\";\nimport DropdownButton from \"./DropdownButton\";\nimport { SketchThumbnailArray, LanguageDropdownValues } from \"../constants\";\nimport { Container, Row, Col, FormGroup, Label, Input } from \"reactstrap\";\nimport * as fetch from \"../../../lib/fetch.js\";\n\nimport \"styles/SketchesModal.scss\";\n\nclass EditSketchModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newLanguage: -1,\n      newName: -1,\n      newThumbnail: -1,\n      disableSubmit: false,\n      error: \"\",\n      onThumbnails: false,\n    };\n  }\n\n  closeModal = () => {\n    if (this.props.onClose && {}.toString.call(this.props.onClose) === \"[object Function]\") {\n      this.props.onClose();\n    }\n    this.setState({\n      newLanguage: -1,\n      newName: -1,\n      newThumbnail: -1,\n      error: \"\",\n      onThumbnails: false,\n      disableSubmit: false,\n    });\n  };\n\n  // Next two bad____input are copied (and slightly modified) from create sketch modal\n\n  badNameInput = () => {\n    if (this.state.newName === -1) {\n      return false;\n    }\n    if (!this.state.newName) {\n      this.setState({ error: \"Name is required\" });\n      return true;\n    }\n    if (this.state.newName.length > 15) {\n      this.setState({ error: \"Name must be 15 characters or less\" });\n      return true;\n    }\n    return false;\n  };\n\n  badLanguageInput = () => {\n    if (this.state.newLanguage === -1) {\n      return false;\n    }\n    if (!this.state.newLanguage) {\n      this.setState({ error: \"Please select a language\" });\n      return true;\n    }\n\n    let notFound = true;\n    for (var i = 0; i < LanguageDropdownValues.length; i++) {\n      if (\n        this.state.newLanguage.display === LanguageDropdownValues[i].display &&\n        this.state.newLanguage.value === LanguageDropdownValues[i].value\n      ) {\n        notFound = false;\n        break;\n      }\n    }\n    if (notFound) {\n      this.setState({ error: \"Invalid language selected\" });\n      return true;\n    }\n\n    return false;\n  };\n\n  handleSubmitEdit = async e => {\n    e.preventDefault();\n\n    if (this.badNameInput() || this.badLanguageInput()) {\n      // note it's impossible to have a bad thumbnail input\n      return;\n    }\n\n    let data = {};\n    let doUpdate = false;\n\n    if (this.state.newLanguage !== -1) {\n      data.language = this.state.newLanguage.value;\n      doUpdate = true;\n    }\n    if (this.state.newName !== -1) {\n      data[\"name\"] = this.state.newName;\n      doUpdate = true;\n    }\n    if (this.state.newThumbnail !== -1) {\n      data[\"thumbnail\"] = this.state.newThumbnail;\n      doUpdate = true;\n    }\n    if (doUpdate) {\n      let updateData = {};\n      updateData[this.props.sketchKey] = data;\n      try {\n        fetch\n          .updatePrograms(this.props.uid, updateData)\n          .then(res => {\n            return res.json();\n          })\n          .then(json => {\n            if (!json.ok) {\n              this.setState({\n                disableSubmit: false,\n                error: json.error || \"Failed to edit sketch, please try again later\",\n              });\n              return;\n            }\n            if (this.state.newLanguage !== -1) {\n              this.props.setProgramLanguage(this.props.sketchKey, this.state.newLanguage.value);\n            }\n            if (this.state.newName !== -1) {\n              this.props.setProgramName(this.props.sketchKey, this.state.newName);\n            }\n            if (this.state.newThumbnail !== -1) {\n              this.props.setProgramThumbnail(this.props.sketchKey, this.state.newThumbnail);\n            }\n            this.closeModal();\n          })\n          .catch(err => {\n            this.setState({\n              disableSubmit: false,\n              error: \"Failed to edit sketch, please try again later\",\n            });\n            console.log(err);\n          });\n      } catch (err) {\n        console.log(err);\n      }\n      this.setState({ disableSubmit: true, error: \"\" });\n    } else {\n      this.closeModal();\n    }\n  };\n\n  renderMainModal() {\n    let thumbnailPreview = (\n      <img\n        src={`${process.env.PUBLIC_URL}/img/sketch-thumbnails/${\n          this.state.newThumbnail !== -1\n            ? SketchThumbnailArray[this.state.newThumbnail]\n            : this.props.sketchImg\n        }.svg`}\n        className={\"sketches-modal-header-thumbnail\"}\n        alt=\"icon\"\n      />\n    );\n    return (\n      <ReactModal\n        isOpen={this.props.isOpen}\n        onRequestClose={this.closeModal}\n        className=\"sketches-modal\"\n        overlayClassName=\"profile-image-overlay\"\n        ariaHideApp={false}\n      >\n        <Container>\n          <h2 className=\"text-center\">Editing \"{this.props.sketchName}\"</h2>\n          <hr />\n          <FormGroup row>\n            <Label className=\"text-right\" for=\"sketch-name\" xs={4}>\n              Name\n            </Label>\n            <Col xs={8}>\n              <Input\n                onChange={e => this.setState({ newName: e.target.value })}\n                value={this.state.newName !== -1 ? this.state.newName : this.props.sketchName}\n                id=\"sketch-name\"\n              />\n            </Col>\n          </FormGroup>\n          <br />\n          <Row>\n            <Col xs=\"4\" className=\"text-right\">\n              Language\n            </Col>\n            <Col xs=\"8\" className=\"d-flex align-items-center\">\n              <DropdownButton\n                dropdownItems={LanguageDropdownValues}\n                onSelect={lang => this.setState({ newLanguage: lang })}\n                displayValue={\n                  this.state.newLanguage !== -1\n                    ? this.state.newLanguage.display\n                    : this.props.sketchLang\n                }\n              />\n            </Col>\n          </Row>\n          <br />\n          <Row>\n            <Col xs=\"4\" className=\"text-right\">\n              <div\n                className=\"sketches-modal-header-thumbnail-container\"\n                style={{ display: \"block\", marginLeft: \"auto\", marginRight: \"0\" }}\n              >\n                {thumbnailPreview}\n              </div>\n            </Col>\n            <Col xs=\"8\" className=\"d-flex align-items-center\">\n              <Button\n                color=\"primary\"\n                size=\"lg\"\n                onClick={() => {\n                  this.setState({ onThumbnails: true });\n                }}\n              >\n                Change\n              </Button>\n            </Col>\n          </Row>\n          <br />\n          <div className=\"text-center text-danger\">{this.state.error || <br />}</div>\n          <hr />\n          <Row>\n            <Col>\n              <Button\n                color=\"danger\"\n                onClick={this.closeModal}\n                size=\"lg\"\n                disabled={this.state.disableSubmit}\n                block\n              >\n                Cancel\n              </Button>\n            </Col>\n            <Col>\n              <Button\n                color=\"success\"\n                onClick={this.handleSubmitEdit}\n                size=\"lg\"\n                disabled={this.state.disableSubmit}\n                block\n              >\n                Confirm\n              </Button>\n            </Col>\n          </Row>\n        </Container>\n      </ReactModal>\n    );\n  }\n\n  renderThumbnailModal() {\n    let icons = SketchThumbnailArray.map((val, index) => {\n      return (\n        <figure\n          className=\"sketches-gallery-item\"\n          key={val}\n          onClick={() => this.setState({ newThumbnail: index })}\n        >\n          <img\n            src={`${process.env.PUBLIC_URL}/img/sketch-thumbnails/${val}.svg`}\n            className={\n              \"sketches-gallery-img\" + (this.state.newThumbnail === index ? \"-selected\" : \"\")\n            }\n            alt=\"icon\"\n          />\n        </figure>\n      );\n    });\n\n    let thumbnailPreview =\n      this.state.newThumbnail !== -1 ? (\n        <img\n          src={`${process.env.PUBLIC_URL}/img/sketch-thumbnails/${\n            SketchThumbnailArray[this.state.newThumbnail]\n          }.svg`}\n          className={\"sketches-modal-header-thumbnail\"}\n          alt=\"icon\"\n        />\n      ) : (\n        <img\n          src={`${process.env.PUBLIC_URL}/img/sketch-thumbnails/${this.props.sketchImg}.svg`}\n          className={\"sketches-modal-header-thumbnail\"}\n          alt=\"icon\"\n        />\n      );\n    return (\n      <ReactModal\n        isOpen={this.props.isOpen}\n        onRequestClose={this.closeModal}\n        className=\"sketches-modal\"\n        overlayClassName=\"profile-image-overlay\"\n        ariaHideApp={false}\n      >\n        <form>\n          <div className=\"sketches-modal-header d-flex align-items-center\">\n            <h1>Choose a thumbnail</h1>\n            <div className=\"ml-4 sketches-modal-header-thumbnail-container\">{thumbnailPreview}</div>\n          </div>\n          <hr />\n          <div className=\"sketches-gallery\">{icons}</div>\n          <div style={{ color: \"red\", textAlign: \"center\" }}>{this.state.error || <br />}</div>\n        </form>\n        <hr />\n        <Button\n          color=\"secondary\"\n          onClick={() => {\n            this.setState({ onThumbnails: false });\n          }}\n          size=\"lg\"\n          block\n        >\n          Back\n        </Button>{\" \"}\n      </ReactModal>\n    );\n  }\n\n  render() {\n    if (this.state.onThumbnails) {\n      return this.renderThumbnailModal();\n    }\n\n    return this.renderMainModal();\n  }\n}\n\nexport default EditSketchModal;\n","import EditSketchModal from \"../components/EditSketchModal.js\";\nimport { connect } from \"react-redux\";\nimport {\n  setProgramLanguage,\n  setProgramName,\n  setProgramThumbnail,\n} from \"../../../actions/programsActions\";\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.userData.uid,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setProgramLanguage: (program, value) => dispatch(setProgramLanguage(program, value)),\n    setProgramName: (program, value) => dispatch(setProgramName(program, value)),\n    setProgramThumbnail: (program, value) => dispatch(setProgramThumbnail(program, value)),\n  };\n};\n\nconst EditSketchModalContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(EditSketchModal);\n\nexport default EditSketchModalContainer;\n","import React from \"react\";\nimport SketchBox from \"./components/SketchBox\";\nimport ConfirmDeleteModalContainer from \"./containers/ConfirmDeleteModalContainer\";\nimport CreateSketchModalContainer from \"./containers/CreateSketchModalContainer\";\nimport EditSketchModalContainer from \"./containers/EditSketchModalContainer\";\nimport OpenPanelButtonContainer from \"../common/containers/OpenPanelButtonContainer\";\nimport { SketchThumbnailArray } from \"./constants\";\nimport ProcessingConstructor from \"../Editor/components/Output/Processing\";\n// import { PANEL_SIZE } from \"../../constants\";\nimport \"styles/Sketches.scss\";\n\nimport { Button } from \"reactstrap\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCogs } from \"@fortawesome/free-solid-svg-icons\";\nimport { faFile } from \"@fortawesome/free-solid-svg-icons\";\nimport { faPython } from \"@fortawesome/free-brands-svg-icons\";\nimport { faHtml5 } from \"@fortawesome/free-brands-svg-icons\";\n\nconst ROW_PADDING = 100;\nconst SKETCH_WIDTH = 220;\n\nclass Sketches extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      confirmDeleteModalOpen: false,\n      createSketchModalOpen: false,\n      editSketchModalOpen: false,\n      selectedSketch: \"\",\n      selectedImg: \"\",\n      selectedLang: \"\",\n      selectedKey: \"\",\n    };\n  }\n\n  getRandomSketchThumbnail = () => {\n    return SketchThumbnailArray[Math.floor(Math.random() * SketchThumbnailArray.length)];\n  };\n\n  downloadSketchCode = (name, language, code) => {\n    let extension = \".\";\n    switch (language) {\n      case \"python\":\n        extension += \"py\";\n        break;\n      case \"processing\": // this is because we construct the processing result as an HTML file. jank.\n      case \"html\":\n        extension += \"html\";\n        break;\n      default:\n        extension += \"txt\";\n    }\n    // taken from this: https://stackoverflow.com/questions/44656610/download-a-string-as-txt-file-in-react\n    const element = document.createElement(\"a\");\n    let file;\n    if (language === \"processing\") {\n      file = new Blob([ProcessingConstructor(code, true)], { type: \"text/plain\" });\n    } else {\n      file = new Blob([code], { type: \"text/plain\" });\n    }\n    element.href = URL.createObjectURL(file);\n    element.download = name + extension;\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  };\n\n  setCreateSketchModalOpen = val => {\n    this.setState({ createSketchModalOpen: val });\n  };\n\n  setConfirmDeleteModalOpen = (val, sketch, key) => {\n    this.setState({ confirmDeleteModalOpen: val, selectedSketch: sketch, selectedKey: key });\n  };\n\n  setEditSketchModalOpen = (val, sketch, img, lang, key) => {\n    this.setState({\n      editSketchModalOpen: val,\n      selectedSketch: sketch,\n      selectedImg: img,\n      selectedLang: lang,\n      selectedKey: key,\n    });\n  };\n\n  setProgram = name => {\n    this.props.setMostRecentProgram(name);\n  };\n\n  renderHeader = () => (\n    <div className=\"sketches-header\">\n      <OpenPanelButtonContainer />\n      <div className=\"sketches-header-text\">Sketches</div>\n      <Button\n        className=\"ml-auto mr-2\"\n        color=\"success\"\n        size=\"lg\"\n        onClick={() => this.setCreateSketchModalOpen(true)}\n      >\n        <FontAwesomeIcon icon={faFile} /> Create Sketch\n      </Button>\n    </div>\n  );\n\n  getThumbnailSrc = val => {\n    if (val === undefined || val === \"\" || val >= SketchThumbnailArray.length || val < 0) {\n      return SketchThumbnailArray[0];\n    }\n    return SketchThumbnailArray[val];\n  };\n\n  renderSketches = () => {\n    let newList = this.props.programs.concat([]);\n    if (newList.size === 0) {\n      return (\n        <div>\n          <div className=\"no-sketches-container\">\n            <h2>There's nothing here! Why don't you try creating a sketch?</h2>\n            <br />\n            <p>\n              <Button color=\"success\" size=\"lg\" onClick={() => this.setCreateSketchModalOpen(true)}>\n                Create A Sketch\n              </Button>\n            </p>\n          </div>\n        </div>\n      );\n    }\n    let sketches = [];\n    newList.sort((a, b) => {\n      if (a.name < b.name) return -1;\n      if (a.name === b.name) return 0;\n      // if (a.name > b.name) return 1;\n      else return 1;\n    });\n    newList.forEach(({ key, name, language, thumbnail, code }) => {\n      let faLanguage;\n      let languageDisplay; // not a great way to do this!\n      switch (language) {\n        case \"python\":\n          faLanguage = faPython;\n          languageDisplay = \"Python\";\n          break;\n        case \"processing\":\n          faLanguage = faCogs;\n          languageDisplay = \"Processing\";\n          break;\n        case \"html\":\n        default:\n          faLanguage = faHtml5;\n          languageDisplay = \"HTML\";\n      }\n      sketches.push(\n        <SketchBox\n          img={this.getThumbnailSrc(thumbnail)}\n          icon={faLanguage}\n          name={name}\n          key={key}\n          deleteFunc={() => {\n            this.setConfirmDeleteModalOpen(true, name, key);\n          }}\n          downloadFunc={() => {\n            this.downloadSketchCode(name, language, code);\n          }}\n          editFunc={() => {\n            this.setEditSketchModalOpen(\n              true,\n              name,\n              this.getThumbnailSrc(thumbnail),\n              languageDisplay,\n              key,\n            );\n          }}\n          redirFunc={() => {\n            this.setProgram(key);\n          }}\n        />,\n      );\n    });\n    let numSketchesPerRow = Math.floor((this.props.calculatedWidth - ROW_PADDING) / SKETCH_WIDTH);\n    let rows = [];\n    let originalLength = sketches.length;\n    for (let i = 0; i < originalLength / numSketchesPerRow; i++) {\n      rows.push(\n        <div className=\"sketches-grid-row\" key={i}>\n          {sketches.splice(0, numSketchesPerRow)}\n        </div>,\n      );\n    }\n\n    return <div className=\"sketches-grid\">{rows}</div>;\n  };\n\n  renderConfirmDeleteModal = () => (\n    <ConfirmDeleteModalContainer\n      isOpen={this.state.confirmDeleteModalOpen}\n      onClose={() => this.setConfirmDeleteModalOpen(false)}\n      sketchName={this.state.selectedSketch}\n      sketchKey={this.state.selectedKey}\n    />\n  );\n\n  renderCreateSketchModal = () => (\n    <CreateSketchModalContainer\n      isOpen={this.state.createSketchModalOpen}\n      onClose={() => this.setCreateSketchModalOpen(false)}\n    />\n  );\n\n  renderEditSketchModal = () => (\n    <EditSketchModalContainer\n      isOpen={this.state.editSketchModalOpen}\n      onClose={() => this.setEditSketchModalOpen(false)}\n      sketchName={this.state.selectedSketch}\n      sketchImg={this.state.selectedImg}\n      sketchLang={this.state.selectedLang}\n      sketchKey={this.state.selectedKey}\n    />\n  );\n\n  renderContent = () => {\n    return (\n      <React.Fragment>\n        {this.renderHeader()}\n        {this.renderSketches()}\n        {this.renderCreateSketchModal()}\n        {this.renderConfirmDeleteModal()}\n        {this.renderEditSketchModal()}\n      </React.Fragment>\n    );\n  };\n\n  render() {\n    const containerStyle = {\n      left: this.props.left || 0,\n      width: this.props.calculatedWidth,\n      height: this.props.screenHeight,\n    };\n\n    return (\n      <div className=\"sketches-container\" style={containerStyle}>\n        {this.renderContent()}\n      </div>\n    );\n  }\n}\n\nexport default Sketches;\n","import Sketches from \"../index.js\";\nimport { connect } from \"react-redux\";\nimport { setMostRecentProgram } from \"../../../actions/userDataActions.js\";\nimport { togglePanel } from \"../../../actions/uiActions.js\";\nimport Immutable from \"immutable\";\nimport { PANEL_SIZE, CLOSED_PANEL_LEFT, OPEN_PANEL_LEFT } from \"../../../constants\";\n\nconst mapStateToProps = state => {\n  const { mostRecentProgram } = state.userData;\n  const programs = state.programs.keySeq().map(id => {\n    let temp = state.programs.get(id, Immutable.Map()).toJS();\n    temp.key = id;\n    return temp;\n  });\n\n  const left = (state.ui.panelOpen ? OPEN_PANEL_LEFT : CLOSED_PANEL_LEFT) + PANEL_SIZE;\n  const calculatedWidth = state.ui.screenWidth - (left || 0);\n\n  return {\n    mostRecentProgram,\n    programs,\n    calculatedWidth,\n    left,\n    screenHeight: state.ui.screenHeight,\n    panelOpen: state.ui.panelOpen,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setMostRecentProgram: value => dispatch(setMostRecentProgram(value)),\n    togglePanel: () => dispatch(togglePanel()),\n  };\n};\n\nconst SketchesContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Sketches);\n\nexport default SketchesContainer;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button } from \"reactstrap\";\nimport firebase from \"firebase\";\nimport {\n  MINIMUM_DISPLAY_NAME_LENGTH,\n  MAXIMUM_DISPLAY_NAME_LENGTH,\n  PHOTO_NAMES,\n  DEFAULT_PHOTO_NAME,\n  PANEL_SIZE,\n} from \"../../constants\";\nimport ReactModal from \"react-modal\";\nimport { faBook } from \"@fortawesome/free-solid-svg-icons\";\nimport { faEdit } from \"@fortawesome/free-solid-svg-icons\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport \"styles/Panel.scss\";\nimport Footer from \"./Footer\";\n\n/**--------Props--------\n * togglePanel: function to be called when the panel is collapsed or opened\n */\n\nclass ProfilePanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      nameIsHovering: false,\n      imageIsHovering: false,\n      editingName: false,\n      showModal: false,\n      name: this.props.displayName,\n      selectedImage: \"\",\n      displayNameMessage: \"\",\n    };\n  }\n\n  componentDidUpdate() {}\n\n  handleOpenModal = () => {\n    this.setState({ showModal: true, selectedImage: this.props.photoName });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ selectedImage: \"\", showModal: false });\n  };\n\n  handleEditNameClick = () => {\n    this.setState(prevState => {\n      return { editingName: true };\n    });\n  };\n\n  handleEditImageClick = () => {\n    this.setState(prevState => {\n      return { showModal: true };\n    });\n  };\n\n  onNameChange = e => {\n    this.setState({ name: e.target.value });\n  };\n\n  checkInputs = () => {\n    const name = this.state.name;\n    if (name.length < MINIMUM_DISPLAY_NAME_LENGTH || name.length > MAXIMUM_DISPLAY_NAME_LENGTH) {\n      this.setState({\n        displayNameMessage: `Display name must be between ${MINIMUM_DISPLAY_NAME_LENGTH}-${MAXIMUM_DISPLAY_NAME_LENGTH} characters long`,\n      });\n      return true;\n    } else if (name.match(/[^a-zA-Z0-9!@#$% ]/)) {\n      this.setState({\n        displayNameMessage:\n          \"Only use upper case, lower case, numbers, spaces, and/or the following special characters !@#$%\",\n      });\n      return true;\n    }\n    return false;\n  };\n\n  onNameSubmit = e => {\n    e.preventDefault();\n    let badInputs = this.checkInputs();\n\n    if (badInputs) {\n      this.setState({ name: this.props.displayName, editingName: false });\n      return;\n    } else {\n      this.props.setDisplayName(this.state.name);\n      this.setState({ editingName: false, displayNameMessage: \"\" });\n      return;\n    }\n  };\n\n  onImageSubmit = () => {\n    // SEND IMAGE NAME TO BACKEND, CHANGE IMAGE\n    this.props.setPhotoName(this.state.selectedImage);\n    this.handleCloseModal();\n    this.setState({ selectedImage: \"\" });\n  };\n\n  renderErrorMessage = (msg, addBreak) => {\n    if (msg)\n      return (\n        <span>\n          <div className=\"profile-input-error\">{msg}</div>\n        </span>\n      );\n\n    return addBreak ? <br /> : null;\n  };\n\n  renderPanelImage = () => {\n    return (\n      <div\n        className=\"panel-image-container\"\n        onMouseEnter={() => this.setState({ imageIsHovering: true })}\n        onMouseLeave={() => this.setState({ imageIsHovering: false })}\n      >\n        <img\n          className=\"panel-image\"\n          src={PHOTO_NAMES[this.props.photoName] || PHOTO_NAMES[DEFAULT_PHOTO_NAME]} // needs to be edited to use profile image name\n          alt=\"Your profile\"\n        />\n        {this.state.imageIsHovering && (\n          <button className=\"image-edit-button\" onClick={this.handleOpenModal}>\n            <FontAwesomeIcon icon={faEdit} />\n          </button>\n        )}\n      </div>\n    );\n  };\n\n  onImageClick = name => {\n    this.setState(prevState => {\n      return { selectedImage: name };\n    });\n  };\n\n  renderImageModal = () => {\n    let names = Object.keys(PHOTO_NAMES);\n    let icons = names.map(val => {\n      return (\n        <figure className=\"gallery-item\" key={val} onClick={() => this.onImageClick(val)}>\n          <img\n            src={PHOTO_NAMES[val]}\n            className={\"gallery-img\" + (this.state.selectedImage === val ? \"-selected\" : \"\")}\n            alt=\"icon\"\n          />\n        </figure>\n      );\n    });\n    return (\n      <ReactModal\n        isOpen={this.state.showModal}\n        onRequestClose={this.handleCloseModal}\n        className=\"profile-image-modal\"\n        overlayClassName=\"profile-image-overlay\"\n        ariaHideApp={false}\n      >\n        <div className=\"gallery\">{icons}</div>\n        <div className=\"text-center\">\n          <Button\n            color=\"success\"\n            size=\"lg\"\n            onClick={this.onImageSubmit}\n            id=\"modal-change-image-button\"\n          >\n            Submit\n          </Button>\n        </div>\n      </ReactModal>\n    );\n  };\n\n  renderName = () => {\n    if (!this.state.editingName) {\n      return (\n        <div\n          className=\"panel-name\"\n          onMouseEnter={() => this.setState({ nameIsHovering: true })}\n          onMouseLeave={() => this.setState({ nameIsHovering: false })}\n          onClick={this.handleEditNameClick}\n        >\n          {this.props.displayName || \"Joe Bruin\"}\n          {this.state.nameIsHovering && (\n            <button className=\"edit-icon-image\" onClick={this.handleEditNameClick}>\n              <FontAwesomeIcon icon={faEdit} />\n            </button>\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <form className=\"panel-edit-container\" onSubmit={this.onNameSubmit}>\n          <input\n            className=\"panel-edit\"\n            placeholder={this.props.displayName}\n            onChange={this.onNameChange}\n            value={this.state.name}\n            onBlur={this.onNameSubmit}\n          />\n        </form>\n      );\n    }\n  };\n\n  renderEditorButton = () => (\n    <Link\n      to={{ pathname: \"/editor\" }}\n      className=\"panel-button btn btn-secondary btn-lg btn-block\"\n      key=\"editor-button\"\n      id=\"editor-button\"\n    >\n      <FontAwesomeIcon icon={faPencilAlt} />\n      <span className=\"panel-button-text\">Editor</span>\n    </Link>\n  );\n\n  renderSketchesButton = () => (\n    <Link\n      to={{ pathname: \"/sketches\" }}\n      className=\"panel-button btn btn-secondary btn-lg btn-block\"\n      key=\"sketches-button\"\n      id=\"sketches-button\"\n    >\n      <FontAwesomeIcon icon={faBook} />\n      <span className=\"panel-button-text\">Sketches</span>\n    </Link>\n  );\n\n  renderSignOutButton = () => (\n    <Button\n      className=\"panel-button\"\n      key=\"sign-out-button\"\n      id=\"sign-out-button\"\n      size=\"lg\"\n      block\n      onClick={() => firebase.auth().signOut()}\n    >\n      <FontAwesomeIcon icon={faSignOutAlt} />\n      <span className=\"panel-button-text\">Log Out</span>\n    </Button>\n  );\n\n  renderButtons = () => {\n    let panelButtons = [];\n\n    switch (this.props.contentType) {\n      case \"sketches\":\n        panelButtons.push(this.renderEditorButton());\n        break;\n      case \"editor\":\n        panelButtons.push(this.renderSketchesButton());\n        break;\n      default:\n        break;\n    }\n\n    panelButtons.push(this.renderSignOutButton());\n\n    return <div className=\"panel-buttons\">{panelButtons}</div>;\n  };\n\n  renderContent = () => (\n    <div className=\"panel-content\">\n      {this.renderPanelImage()}\n      {this.renderImageModal()}\n      {this.renderName()}\n      {this.renderErrorMessage(this.state.displayNameMessage)}\n      {this.renderButtons()}\n    </div>\n  );\n\n  renderCollapseButton = () => (\n    <div className=\"panel-collapse-button\" onClick={this.props.togglePanel}>\n      <FontAwesomeIcon icon={faTimes} />\n    </div>\n  );\n\n  render() {\n    const panelStyle = {\n      left: this.props.left,\n      height: this.props.screenHeight,\n      width: PANEL_SIZE,\n    };\n    return (\n      <div className=\"panel\" style={panelStyle}>\n        {this.renderCollapseButton()}\n        {this.renderContent()}\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default ProfilePanel;\n","import ProfilePanel from \"../ProfilePanel\";\nimport { connect } from \"react-redux\";\nimport { setDisplayName, setPhotoName } from \"../../../actions/userDataActions\";\nimport { togglePanel } from \"../../../actions/uiActions\";\nimport { DEFAULT_PHOTO_NAME, CLOSED_PANEL_LEFT, OPEN_PANEL_LEFT } from \"../../../constants\";\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    displayName: state.userData.displayName,\n    uid: state.userData.uid,\n    photoName: state.userData.photoName || DEFAULT_PHOTO_NAME,\n    screenHeight: state.ui.screenHeight,\n    left: state.ui.panelOpen ? OPEN_PANEL_LEFT : CLOSED_PANEL_LEFT,\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    collectUserPhoto: () => {},\n    setDisplayName: name => dispatch(setDisplayName(name)),\n    setPhotoName: name => dispatch(setPhotoName(name)),\n    togglePanel: () => {\n      dispatch(togglePanel());\n    },\n  };\n};\n\nconst ProfilePanelContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ProfilePanel);\n\nexport default ProfilePanelContainer;\n","import React from \"react\";\nimport EditorContainer from \"./Editor/containers/EditorContainer\";\nimport SketchesPageContainer from \"./Sketches/containers/SketchesContainer\";\nimport \"styles/Main.scss\";\nimport ProfilePanelContainer from \"./common/containers/ProfilePanelContainer\";\n\nclass Editor extends React.Component {\n  renderSketchesPage = () => <SketchesPageContainer />;\n\n  renderEditor = () => <EditorContainer />;\n\n  renderContent = () => {\n    switch (this.props.contentType) {\n      case \"sketches\":\n        return this.renderSketchesPage();\n      case \"editor\":\n      default:\n        return this.renderEditor();\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"main\">\n        <ProfilePanelContainer contentType={this.props.contentType} />\n        {this.renderContent()}\n      </div>\n    );\n  }\n}\n\nexport default Editor;\n","import Main from \"../Main.js\";\nimport { connect } from \"react-redux\";\nimport { togglePanel } from \"../../actions/uiActions.js\";\nimport { CLOSED_PANEL_LEFT, OPEN_PANEL_LEFT } from \"../../constants\";\n\nconst mapStateToProps = state => {\n  return {\n    screenWidth: state.ui.screenWidth,\n    screenHeight: state.ui.screenHeight,\n    panelOpen: state.ui.panelOpen,\n    panelLeft: state.ui.panelOpen ? OPEN_PANEL_LEFT : CLOSED_PANEL_LEFT,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    togglePanel: () => {\n      dispatch(togglePanel());\n    },\n  };\n};\n\nconst MainContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Main);\n\nexport default MainContainer;\n","import React from \"react\";\nimport { RingLoader } from \"react-spinners\";\nimport \"styles/Loading.scss\";\n\n/*\n\tProps:\n\t\tbgColor: string representing the color of the background of the img (can be hex color, rgb(r, g, b, a), or color name)\n\t\ttextColor: string representing the color of the text in the button (can be hex color, rgb(r, g, b, a), or color name)\n\t\timgSrc: string representing the location of the img used as the icon (can be in the form of URL, path location, or data representing image)\n\t\ttextPadding: string representing padding to the left of the text, i.e. distance from the img (give px units)\n*/\n\nconst Loading = props => (\n  <div className=\"Loading\">\n    <div className=\"Loading-title\">Loading</div>\n    <RingLoader color={\"#171124\"} size={250} loading={true} />\n  </div>\n);\n\nexport default Loading;\n","import React from \"react\";\nimport { Button } from \"reactstrap\";\nimport { RingLoader } from \"react-spinners\";\nimport { Link } from \"react-router-dom\";\nimport firebase from \"firebase\";\nimport SHA256 from \"crypto-js/sha256\";\nimport LoginInput from \"../Login/LoginInput.js\";\nimport {\n  MINIMUM_USERNAME_LENGTH,\n  MINIMUM_PASSWORD_LENGTH,\n  MAXIMUM_USERNAME_LENGTH,\n  MAXIMUM_PASSWORD_LENGTH,\n  EMAIL_DOMAIN_NAME,\n} from \"../../constants\";\n\n/**\n * Props\n *\n * None\n */\n\nexport default class CreateUserForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      errorMessage: \"\",\n      waiting: false,\n      usernameMessage: \"\",\n      passwordMessage: \"\",\n    };\n  }\n\n  /**\n   * checkInputs - validates username and password.\n   * The criteria checked:\n   *    -Username length: as defined in constants file\n   *    -Username characters: only alphanumeric characters, plus !@#$%\n   *    -Password length: as defined in constants file\n   *    -Password characters: only alphanumeric characters, plus !@#$%\n   * @return {boolean} - false when bad inputs given\n   */\n  checkInputs = () => {\n    const { username, password, confirmPassword } = this.state;\n    let badInputs = true;\n\n    //if username is too long, too short, has non ascii and some special characters, reject it\n    if (username.length < MINIMUM_USERNAME_LENGTH || username.length > MAXIMUM_USERNAME_LENGTH) {\n      this.setState({\n        usernameMessage: `Username must be between ${MINIMUM_USERNAME_LENGTH}-${MAXIMUM_USERNAME_LENGTH} characters long`,\n      });\n      badInputs = false;\n    } else if (username.match(/[^a-zA-Z0-9!@#$%]/)) {\n      this.setState({\n        usernameMessage:\n          \"Username must only use upper case and lower case letters, numbers, and/or the special characters !@#$%\",\n      });\n      badInputs = false;\n    } else {\n      this.setState({ usernameMessage: \"\" });\n    }\n\n    //if password is too long, too short, has non ascii and some special characters, reject it\n    if (password.length < MINIMUM_PASSWORD_LENGTH || password.length > MAXIMUM_PASSWORD_LENGTH) {\n      this.setState({\n        passwordMessage: `Password must be between ${MINIMUM_PASSWORD_LENGTH}-${MAXIMUM_PASSWORD_LENGTH} characters long`,\n      });\n      badInputs = false;\n    } else if (password.match(/[^a-zA-Z0-9!@#$%]/)) {\n      this.setState({\n        passwordMessage:\n          \"Password must only use upper case and lower case letters, numbers, and/or the special characters !@#$%\",\n      });\n      badInputs = false;\n    } else if (password !== confirmPassword) {\n      this.setState({\n        passwordMessage: `Password and Confirm Password don't match`,\n        password: \"\",\n        confirmPassword: \"\",\n      });\n      badInputs = false;\n    } else {\n      this.setState({ passwordMessage: \"\" });\n    }\n\n    return badInputs;\n  };\n\n  /**\n   * submit - this function executes on the click of the button to create a new user on the\n   * createUser page\n   * @param  {HTMLElement} e - solely used to prevent default page behavior on the clicking\n   * of the button\n   * @return {void}   submit returns early if the inputs passed by a prospective user\n   * are bad.\n   */\n  submit = e => {\n    e.preventDefault();\n\n    this.setState({\n      waiting: true,\n      errorMessage: \"\",\n      usernameMessage: \"\",\n      passwordMessage: \"\",\n    });\n\n    let validInputs = this.checkInputs();\n\n    //if we found any bad inputs, don't try to create the user on the server\n    if (!validInputs) {\n      this.setState({ waiting: false });\n      return;\n    }\n\n    // This is part of the firebase email/password workaround.\n    // We create an email lookalike to trick firebase into thinking the user\n    // signed up with an email, instead of a username, display name, and password\n    let email = this.state.username + EMAIL_DOMAIN_NAME;\n    let passHash = SHA256(this.state.password).toString();\n\n    // register user in firebase\n    firebase\n      .auth()\n      .createUserWithEmailAndPassword(email, passHash)\n      .then(({ user }) => {})\n      .catch(err => {\n        console.error(err);\n        let newMsg = err.message;\n        switch (err.code) {\n          case \"auth/invalid-email\":\n            newMsg =\n              \"Invalid username. Usernames must only have alphanumeric characters plus !@#$%.\";\n            break;\n          case \"auth/email-already-in-use\":\n            newMsg = \"Username is taken; please use another one.\";\n            break;\n          case \"auth/user-not-found\": // this shouldn't ever happen\n            newMsg = \"No account found for username.\";\n            break;\n          case \"auth/wrong-password\":\n            newMsg = \"Invalid password provided.\";\n            break;\n          case \"auth/network-request-failed\":\n            newMsg = \"Network error - check your internet connection.\";\n            break;\n          case \"auth/app-deleted\":\n          case \"auth/app-not-authorized\":\n          case \"auth/argument-error\":\n          case \"auth/invalid-api-key\":\n          case \"auth/operation-not-allowed\":\n          case \"auth/requires-recent-login\":\n          case \"auth/unauthorized-domain\":\n            newMsg =\n              \"App was not properly configured. Please contact administrator. Error: \" + err.code;\n            break;\n          case \"auth/invalid-user-token\":\n          case \"auth/user-disabled\":\n          case \"auth/user-token-expired\":\n          case \"auth/web-storage-unsupported\":\n            newMsg = \"Issue with user. Please contact administrator. Error: \" + err.code;\n            break;\n          default:\n            newMsg = \"Failed to create user: \" + err.code;\n        }\n        this.setState({ waiting: false, errorMessage: newMsg || \"Failed to create user.\" });\n      });\n\n    this.setState({ password: \"\", confirmPassword: \"\" });\n  };\n\n  renderErrorMessage = (msg, addBreak) => {\n    if (msg)\n      return (\n        <span>\n          <div className=\"login-form-input-error\">{msg}</div>\n        </span>\n      );\n\n    return addBreak ? <br /> : null;\n  };\n\n  updateUsername = username => this.setState({ username });\n  updatePassword = password => this.setState({ password });\n  updateConfirmPassword = confirmPassword => this.setState({ confirmPassword });\n\n  renderInputs = () => (\n    <div className=\"login-form-input-list\">\n      <div>\n        <LoginInput\n          type={\"Username\"}\n          data={this.state.username}\n          waiting={this.state.waiting}\n          onChange={this.updateUsername}\n        />\n        <LoginInput\n          type={\"Password\"}\n          data={this.state.password}\n          waiting={this.state.waiting}\n          onChange={this.updatePassword}\n        />\n        <LoginInput\n          type={\"Confirm Password\"}\n          data={this.state.confirmPassword}\n          waiting={this.state.waiting}\n          onChange={this.updateConfirmPassword}\n        />\n        {this.renderErrorMessage(this.state.usernameMessage)}\n        {this.renderErrorMessage(this.state.passwordMessage)}\n        {this.renderErrorMessage(this.state.errorMessage, true)}\n      </div>\n    </div>\n  );\n\n  renderAction = () => {\n    if (this.state.waiting) {\n      return (\n        <div className=\"login-form-loader\">\n          <RingLoader color={\"#857e8f\"} size={50} loading={true} />\n        </div>\n      );\n    } else {\n      return (\n        <Button className=\"login-form-button\" size=\"lg\" type=\"submit\">\n          Create Account\n        </Button>\n      );\n    }\n  };\n\n  renderLink = () => (\n    <Link to=\"/login\" className=\"login-form-link\">\n      Already have an account? Click here to login.\n    </Link>\n  );\n\n  render() {\n    return (\n      <div className=\"login-form-container\">\n        <form className=\"login-form\" onSubmit={this.submit}>\n          <h1>Create a new account</h1>\n          <br />\n          {this.renderInputs()}\n          {this.renderAction()}\n          <br />\n          <br />\n          {this.renderLink()}\n        </form>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Footer from \"./common/Footer.js\";\nimport CreateUserForm from \"./CreateUser/CreateUserForm.js\";\nimport LoginGuy from \"../img/blueguy.png\";\n\n/**--------Props--------\n * None\n */\n\nclass CreateUser extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <div className=\"login-page\">\n        <div className=\"login-page-content\" style={{ backgroundImage: `url(${LoginGuy})` }}>\n          <CreateUserForm />\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default CreateUser;\n","import React from \"react\";\nimport { Button } from \"reactstrap\";\nimport Footer from \"./common/Footer\";\nimport { Link } from \"react-router-dom\";\nimport firebase from \"firebase\";\nimport \"styles/Page.scss\";\nimport { GH_REPO_NAME } from \"../constants\";\n\nclass Error extends React.Component {\n  render() {\n    return (\n      <div className=\"page-container\">\n        <h2>Uh oh, something went wrong!</h2>\n        <h1>Error: {this.props.errorMsg}</h1>\n        <br />\n        <Button color=\"primary\" size=\"lg\" target=\"_blank\" href={`${GH_REPO_NAME}/issues`}>\n          Let Us Know!\n        </Button>\n        &nbsp;\n        <Link to=\"/\">\n          <Button color=\"success\" size=\"lg\">\n            Back to safety\n          </Button>\n        </Link>\n        &nbsp;\n        {this.props.isValidUser && (\n          <Button color=\"danger\" size=\"lg\" onClick={() => firebase.auth().signOut()}>\n            Log Out\n          </Button>\n        )}\n        <Footer />\n      </div>\n    );\n  }\n}\nexport default Error;\n","import React from \"react\";\nimport { Button } from \"reactstrap\";\nimport Footer from \"./common/Footer\";\nimport { Link } from \"react-router-dom\";\nimport \"styles/Page.scss\";\n\nclass Error extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <div className=\"page-container\">\n        <span>Error: 404</span>\n        <h1>Uh oh, page not found!</h1>\n        <br />\n        <Link to=\"/\">\n          <Button color=\"success\" size=\"lg\">\n            Back to safety\n          </Button>\n        </Link>\n        <Footer />\n      </div>\n    );\n  }\n}\nexport default Error;\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Redirect, Switch } from \"react-router-dom\";\nimport { ROUTER_BASE_NAME } from \"../constants\";\nimport LoginPage from \"./containers/LoginContainer\";\nimport MainContainer from \"./containers/MainContainer\";\nimport LoadingPage from \"./common/LoadingPage\";\nimport CreateUserPage from \"./CreateUser\";\nimport Error from \"./Error\";\nimport PageNotFound from \"./PageNotFound\";\nimport firebase from \"firebase\";\nimport \"styles/app.scss\";\n\nconst provider = new firebase.auth.EmailAuthProvider();\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      checkedAuth: false,\n    };\n  }\n\n  //==============React Lifecycle Functions===================//\n\n  componentDidMount = () => {\n    firebase.auth().onAuthStateChanged(async user => {\n      await this.onAuthHandler(user);\n    });\n    window.addEventListener(\"resize\", this.handleResize, true);\n  };\n\n  componentWillUnmount = () => {\n    window.removeEventListener(\"resize\", this.handleResize, true);\n  };\n\n  handleResize = () => {\n    this.props.screenResize(window.innerWidth, window.innerHeight);\n  };\n\n  /**\n   *  TODO: Consider reducing the numerous side effects of this function in favor of the one function, one purpose principle\n   * onAuthHandler - on execution will set a flag checkedAuth to true. If a valid user is passed to the function,\n   * onAuthHandler will attempt to load the metadata and account data corresponding to this account.  If the user\n   * has not set their displayName, it will be set to \"New User\". If no user is passed, we clear any existng user data from the\n   * application.\n   * @param  {firebase.auth().currentUser}  user - a user object as passed by firebase.auth()\n   */\n  onAuthHandler = async user => {\n    console.log(\"checking auth\");\n    if (user) {\n      console.log(\"found user\");\n      const { uid } = user;\n      if (uid) {\n        await this.props.loadUserData(uid, this.showErrorPage);\n        this.setState({ checkedAuth: true });\n      } else {\n        this.props.loadFailure(\"Failed to load user data...\");\n        this.setState({ checkedAuth: true });\n      }\n    } else {\n      console.log(\"no user found\");\n      this.props.clearUserData();\n      this.setState({ checkedAuth: true });\n    }\n  };\n\n  showErrorPage = err => {\n    console.log(err);\n    this.props.loadFailure(err);\n  };\n\n  renderHome = isValidUser => {\n    return isValidUser ? <Redirect to=\"/editor\" /> : <Redirect to=\"/login\" />;\n  };\n\n  render() {\n    //if we haven't checked if the user is logged in yet, show a loading screen\n    if (!this.state.checkedAuth) {\n      return <LoadingPage />;\n    }\n\n    //the user is not valid if there's no UID\n    let isValidUser = this.props.uid;\n\n    return (\n      <Router basename={ROUTER_BASE_NAME}>\n        <div className=\"App\">\n          <Switch>\n            {/*if the user is loggedIn, redirect them to the editor, otherwise, show the login page*?*/}\n            <Route\n              exact\n              path=\"/\"\n              render={() =>\n                this.props.errorMsg !== \"\" ? (\n                  <Error errorMsg={this.props.errorMsg} isValidUser={isValidUser} />\n                ) : isValidUser ? (\n                  <Redirect to=\"/editor\" />\n                ) : (\n                  <LoginPage provider={provider} />\n                )\n              }\n            />\n            {/*if the user is loggedIn, redirect them to the editor, otherwise, show the login page*?*/}\n            <Route\n              path=\"/login\"\n              render={() =>\n                this.props.errorMsg !== \"\" ? (\n                  <Error errorMsg={this.props.errorMsg} isValidUser={isValidUser} />\n                ) : isValidUser ? (\n                  <Redirect to=\"/editor\" />\n                ) : (\n                  <LoginPage provider={provider} />\n                )\n              }\n            />\n            {/*if the user is not loggedIn, redirect them to the login page, otherwise, show the editor page*?*/}\n            <Route\n              path=\"/editor\"\n              render={() =>\n                this.props.errorMsg !== \"\" ? (\n                  <Error errorMsg={this.props.errorMsg} isValidUser={isValidUser} />\n                ) : !isValidUser ? (\n                  <Redirect to=\"/login\" />\n                ) : (\n                  <MainContainer contentType=\"editor\" />\n                )\n              }\n            />\n            {/*if the user is loggedIn, redirect them to the editor page, otherwise, show the createUser page*?*/}\n            <Route\n              path=\"/createUser\"\n              render={() =>\n                this.props.errorMsg !== \"\" ? (\n                  <Error errorMsg={this.props.errorMsg} isValidUser={isValidUser} />\n                ) : isValidUser ? (\n                  <Redirect to=\"/editor\" />\n                ) : (\n                  <CreateUserPage />\n                )\n              }\n            />\n            {/*if the user isn't loggedIn, redirect them to the login page, otherwise, show the view page*?*/}\n            <Route\n              path=\"/sketches\"\n              render={() =>\n                this.props.errorMsg !== \"\" ? (\n                  <Error errorMsg={this.props.errorMsg} isValidUser={isValidUser} />\n                ) : isValidUser ? (\n                  <MainContainer contentType=\"sketches\" />\n                ) : (\n                  <Redirect to=\"/login\" />\n                )\n              }\n            />\n            {/* Default error page */}\n            <Route\n              path=\"/error\"\n              render={() =>\n                this.props.errorMsg ? (\n                  <Error errorMsg={this.props.errorMsg} isValidUser={isValidUser} />\n                ) : (\n                  this.renderHome(isValidUser)\n                )\n              }\n            />\n\n            {/* Matches all other paths */}\n            <Route render={() => <PageNotFound />} />\n          </Switch>\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","/*\n\tused to link state to App which contains the router, could link functions, but rather do that in each individual container\n*/\nimport App from \"../app.js\";\nimport { connect } from \"react-redux\";\nimport { loadUserData, clearUserData, loadFailure } from \"../../actions/userDataActions.js\";\nimport { loadPrograms, clearPrograms } from \"../../actions/programsActions\";\nimport { screenResize } from \"../../actions/uiActions\";\nimport * as fetch from \"../../lib/fetch.js\";\n\nconst mapStateToProps = state => {\n  return {\n    uid: state.userData.uid,\n    errorMsg: state.userData.error,\n    screenWidth: state.ui.screenWidth,\n    screenHeight: state.ui.screenHeight,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loadUserData: async (uid, onFailure) => {\n      const { ok, data /*error*/ } = await fetch.getUserData(uid, true);\n      //if the request went fine, and there's a non empty userData\n      if (ok && data && data.userData && Object.keys(data.userData).length) {\n        if (data.programs) {\n          dispatch(loadPrograms(data.programs));\n        }\n        dispatch(loadUserData(uid, data.userData));\n      } else {\n        onFailure(\"SERVER ERROR: Unable to get user data from server\");\n      }\n    },\n    clearUserData: () => {\n      dispatch(clearUserData());\n      dispatch(clearPrograms());\n    },\n    loadFailure: err => {\n      dispatch(loadFailure(err));\n    },\n    screenResize: (width, height) => dispatch(screenResize(width, height)),\n  };\n};\n\nconst Root = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(App);\n\nexport default Root;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\",\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log(\"New content is available; please refresh.\");\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {\n  LOAD_USER_DATA,\n  CLEAR_USER_DATA,\n  LOAD_FAILURE,\n  SET_DISPLAY_NAME,\n  SET_MOST_RECENT_PROGRAM,\n  SET_PHOTO_NAME,\n} from \"../actions/userDataActions\";\n\nimport * as fetch from \"../lib/fetch.js\";\n\nconst initialState = {\n  error: \"\",\n  displayName: \"\",\n  uid: \"\",\n  mostRecentProgram: \"\",\n  photoName: \"\",\n};\n\nfunction userDataReducer(state = initialState, action) {\n  switch (action.type) {\n    case LOAD_USER_DATA:\n      //pull all values we want to pay attention to out of the object\n      return Object.assign({}, state, action.userData);\n    case CLEAR_USER_DATA:\n      return initialState;\n    case LOAD_FAILURE:\n      return Object.assign({}, state, { error: action.message });\n    case SET_DISPLAY_NAME:\n      let newName = action.value;\n      fetch\n        .updateUserData(state.uid, { displayName: newName })\n        .then(response => {})\n        .catch(err => {\n          state.error = err;\n          console.log(err);\n        });\n      return Object.assign({}, state, { displayName: newName });\n    case SET_PHOTO_NAME:\n      let newPhotoName = action.photoName;\n      fetch\n        .updateUserData(state.uid, { photoName: newPhotoName })\n        .then(response => {\n          //if nothing went bad, keep the display name, otherwise, change it back (or dont, depends how we wanna do it)\n        })\n        .catch(err => {\n          state.error = err;\n          console.log(err);\n        });\n      return Object.assign({}, state, { photoName: newPhotoName });\n    case SET_MOST_RECENT_PROGRAM:\n      fetch\n        .updateUserData(state.uid, { mostRecentProgram: action.value })\n        .then(response => {})\n        .catch(err => {\n          state.error = err;\n          console.log(err);\n        });\n      return Object.assign({}, state, { mostRecentProgram: action.value });\n    default:\n      return state;\n  }\n}\nexport default userDataReducer;\n","import {\n  SET_PROGRAM_CODE,\n  SET_PROGRAM_LANGUAGE,\n  SET_PROGRAM_NAME,\n  SET_PROGRAM_THUMBNAIL,\n  DELETE_PROGRAM,\n  LOAD_PROGRAMS,\n  CLEAR_PROGRAMS,\n  SET_PROGRAM_DIRTY,\n  ADD_PROGRAM,\n} from \"../actions/programsActions.js\";\nimport Immutable from \"immutable\";\n\nlet initialState = Immutable.Map();\n\nfunction programsReducer(state = initialState, action) {\n  switch (action.type) {\n    case LOAD_PROGRAMS:\n      return Immutable.fromJS(action.programs);\n    case SET_PROGRAM_CODE:\n      return state.setIn([action.program, \"code\"], action.value);\n    case SET_PROGRAM_LANGUAGE:\n      return state.setIn([action.program, \"language\"], action.value);\n    case SET_PROGRAM_DIRTY:\n      return state.setIn([action.program, \"dirty\"], action.value);\n    case SET_PROGRAM_NAME:\n      return state.setIn([action.program, \"name\"], action.value);\n    case SET_PROGRAM_THUMBNAIL:\n      return state.setIn([action.program, \"thumbnail\"], action.value);\n    case ADD_PROGRAM:\n      return state.set(action.program, Immutable.fromJS(action.data));\n    case DELETE_PROGRAM:\n      return state.delete(action.program);\n    case CLEAR_PROGRAMS:\n      return Immutable.Map();\n    default:\n      return state;\n  }\n}\n\nexport default programsReducer;\n","import {\n  CLEAR_OUTPUT,\n  SET_RUN_RESULT,\n  SET_OUTPUT_LANGUAGE,\n  SET_OUTPUT,\n} from \"../actions/outputActions\";\nimport { PYTHON } from \"../constants\";\n\nconst initialState = {\n  runResult: \"\",\n  language: PYTHON,\n};\n\nfunction outputReducer(state = initialState, action) {\n  switch (action.type) {\n    case CLEAR_OUTPUT:\n      return initialState;\n    case SET_RUN_RESULT:\n      return Object.assign({}, state, { runResult: action.value });\n    case SET_OUTPUT_LANGUAGE:\n      return Object.assign({}, state, { language: action.value });\n    case SET_OUTPUT:\n      return Object.assign({}, state, { runResult: action.runResult, language: action.language });\n    default:\n      return state;\n  }\n}\n\nexport default outputReducer;\n","import { SCREEN_RESIZE, TOGGLE_PANEL, SET_PANEL } from \"../actions/uiActions\";\n\nconst initialState = {\n  screenWidth: typeof window === \"object\" ? window.innerWidth : null,\n  screenHeight: typeof window === \"object\" ? window.innerHeight : null,\n  panelOpen: false,\n};\n\nfunction uiReducer(state = initialState, action) {\n  switch (action.type) {\n    case SCREEN_RESIZE:\n      return Object.assign({}, state, { screenWidth: action.width, screenHeight: action.height });\n    case TOGGLE_PANEL:\n      return Object.assign({}, state, { panelOpen: !state.panelOpen });\n    case SET_PANEL:\n      return Object.assign({}, state, { panelOpen: action.value });\n    default:\n      return state;\n  }\n}\n\nexport default uiReducer;\n","import { combineReducers } from \"redux\";\nimport userDataReducer from \"./userDataReducer\";\nimport programsReducer from \"./programsReducer\";\nimport outputReducer from \"./outputReducer\";\nimport uiReducer from \"./uiReducer\";\n\nconst appReducers = combineReducers({\n  userData: userDataReducer,\n  output: outputReducer,\n  programs: programsReducer,\n  ui: uiReducer,\n});\n\nexport default appReducers;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"./styles/global.scss\";\nimport Root from \"./components/containers/AppContainer.js\";\nimport registerServiceWorker from \"./registerServiceWorker\";\nimport { createStore } from \"redux\";\nimport appReducers from \"./reducers\";\nimport config from \"./firebase\";\nimport { Provider } from \"react-redux\";\nimport firebase from \"firebase\";\n\nfirebase.initializeApp(config);\n\nconst store = createStore(\n  appReducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <Root />\n  </Provider>,\n  document.getElementById(\"root\"),\n);\n\nregisterServiceWorker();\n","//TODO: Break up large constants file into smaller constants file\n\nconst PYTHON = \"python\";\nconst JAVASCRIPT = \"javascript\";\nconst HTML = \"html\";\nconst JAVA = \"java\";\nconst PROCESSING = \"processing\";\nconst CPP = \"c++\";\n\nconst SUPPORTED_LANGUAGES = [PYTHON, JAVASCRIPT, HTML, PROCESSING];\n\n//used for syntax highlighting in editor\nlet CODEMIRROR_CONVERSIONS = {};\n\n//for each s\nSUPPORTED_LANGUAGES.forEach(lang => {\n  switch (lang) {\n    case PYTHON:\n      return (CODEMIRROR_CONVERSIONS[lang] = \"python\");\n    case JAVASCRIPT:\n      return (CODEMIRROR_CONVERSIONS[lang] = \"javascript\");\n    case HTML:\n      return (CODEMIRROR_CONVERSIONS[lang] = \"htmlmixed\");\n    case JAVA:\n      return (CODEMIRROR_CONVERSIONS[lang] = \"text/x-java\");\n    case PROCESSING:\n      return (CODEMIRROR_CONVERSIONS[lang] = \"javascript\");\n    case CPP:\n      return (CODEMIRROR_CONVERSIONS[lang] = \"text/x-csrc\");\n    default:\n      console.error(\"SUPPORTED LANGUAGE WITH NO MODE\");\n  }\n});\n\nconst PUBLIC_URL = process.env.PUBLIC_URL;\nconst PHOTO_NAMES = {\n  lightbulb: `${PUBLIC_URL}/img/icons/lightbulb.pnng`,\n  orange: `${PUBLIC_URL}/img/icons/orange.png`,\n  pear: `${PUBLIC_URL}/img/icons/pear.png`,\n  apple: `${PUBLIC_URL}/img/icons/apple.png`,\n  hotdog: `${PUBLIC_URL}/img/icons/hotdog.png`,\n  icecream: `${PUBLIC_URL}/img/icons/icecream.png`,\n  cloud: `${PUBLIC_URL}/img/icons/cloud.png`,\n  earth: `${PUBLIC_URL}/img/icons/earth.png`,\n  heart: `${PUBLIC_URL}/img/icons/heart.png`,\n};\n\n// GH Repo for FE\n\nconst GH_REPO_NAME = \"https://github.com/uclaacm/TeachLAFrontend\";\n\n// Router's base (i.e. anything after the domain)\n\nconst ROUTER_BASE_NAME = \"/TeachLAFrontend\";\n\n// Various Server URLs\nvar SERVER_URL = \"http://localhost:8081\";\nif (process && process.env) {\n  if (process.env.REACT_APP_SERVER_TYPE === \"staging\") {\n    SERVER_URL = \"https://teach-la-staging-backend.herokuapp.com\";\n  }\n  if (process.env.REACT_APP_SERVER_TYPE === \"prod\") {\n    SERVER_URL = \"https://teach-la-backend.herokuapp.com\";\n  }\n}\n\nconst PANEL_SIZE = 250;\n\nmodule.exports = {\n  //Language definitions\n  PYTHON,\n  JAVASCRIPT,\n  HTML,\n  JAVA,\n  PROCESSING,\n  CPP,\n\n  // photo names\n  PHOTO_NAMES,\n  DEFAULT_PHOTO_NAME: \"icecream\",\n\n  GH_REPO_NAME,\n\n  // Router Base Name\n  ROUTER_BASE_NAME,\n\n  //Server Host Name\n  SERVER_URL,\n\n  //User value constants\n  MINIMUM_USERNAME_LENGTH: 6,\n  MINIMUM_PASSWORD_LENGTH: 6,\n  MINIMUM_DISPLAY_NAME_LENGTH: 1,\n  MAXIMUM_USERNAME_LENGTH: 20,\n  MAXIMUM_PASSWORD_LENGTH: 20,\n  MAXIMUM_DISPLAY_NAME_LENGTH: 25,\n\n  //Defaults\n  DEFAULT_MODE: PYTHON,\n  DEFAULT_LANG: PYTHON,\n\n  // UI constants\n  RING_LOADER_SIZE: 50,\n  PANEL_SIZE,\n  CLOSED_PANEL_LEFT: -1 * PANEL_SIZE,\n  OPEN_PANEL_LEFT: 0,\n\n  //codemirror conversions\n  CODEMIRROR_CONVERSIONS,\n\n  //Firebase constants\n  EMAIL_DOMAIN_NAME: \"@fake.com\",\n};\n","module.exports = __webpack_public_path__ + \"static/media/blueguy.ade51e63.png\";","module.exports = __webpack_public_path__ + \"static/media/tla-logo.96efe073.svg\";","import firebase from \"firebase\";\n\nexport const provider = new firebase.auth.FacebookAuthProvider();\n\nlet config = {\n  apiKey: \"AIzaSyD6a3Br7b52N2c6MjZTu1UU0ssf3ZwbfoA\",\n  authDomain: \"tla-editor-backend-staging.firebaseapp.com\",\n  databaseURL: \"https://tla-editor-backend-staging.firebaseio.com\",\n  projectId: \"tla-editor-backend-staging\",\n  storageBucket: \"tla-editor-backend-staging.appspot.com\",\n  messagingSenderId: \"665461655548\",\n  appId: \"1:665461655548:web:146e120e8b12f433429479\",\n};\n\nif (process && process.env) {\n  if (process.env.REACT_APP_FS_PROJ === \"staging\") {\n    config = {\n      apiKey: \"AIzaSyD6a3Br7b52N2c6MjZTu1UU0ssf3ZwbfoA\",\n      authDomain: \"tla-editor-backend-staging.firebaseapp.com\",\n      databaseURL: \"https://tla-editor-backend-staging.firebaseio.com\",\n      projectId: \"tla-editor-backend-staging\",\n      storageBucket: \"tla-editor-backend-staging.appspot.com\",\n      messagingSenderId: \"665461655548\",\n      appId: \"1:665461655548:web:146e120e8b12f433429479\",\n    };\n  }\n  if (process.env.REACT_APP_FS_PROJ === \"prod\") {\n    config = {\n      apiKey: \"AIzaSyBfGWPbFcqH2HLc40B1yCY12B9F0_PO8SM\",\n      authDomain: \"teachlacodeplatform-production.firebaseapp.com\",\n      databaseURL: \"https://teachlacodeplatform-production.firebaseio.com\",\n      projectId: \"teachlacodeplatform-production\",\n      storageBucket: \"teachlacodeplatform-production.appspot.com\",\n      messagingSenderId: \"165628144896\",\n    };\n  }\n}\n\nexport default config;\n"],"sourceRoot":""}